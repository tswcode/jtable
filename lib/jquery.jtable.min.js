(function(b){var a=new Date();b.widget("hik.jtable",{options:{actions:{},fields:{},animationsEnabled:true,defaultDateFormat:"mm/dd/y hh:ii:ss",dialogShowEffect:"fade",dialogHideEffect:"fade",showCloseButton:false,loadingAnimationDelay:500,saveUserPreferences:true,jqueryuiTheme:false,bootstrap3:false,bs3PanelClass:"panel-info",bs3FormClass:"horizontal",bs3UseFormGroup:true,bs3CancelBtnClass:"btn-default",bs3OkBtnClass:"btn-primary",useMobiScroll:true,msPreset:"datetime",msMinDate:new Date(a.getFullYear(),a.getMonth(),a.getDate()),msMaxDate:new Date(a.getFullYear()+2,a.getMonth(),a.getDate()),msStepMinute:5,msTheme:"android-ics light",msMode:"mixed",msDisplay:"modal",msLang:"de",bs3DPweekStart:0,bs3DPcalendarWeeks:false,bs3DPstartDate:-Infinity,bs3DPendDate:Infinity,bs3DPdaysOfWeekDisabled:[],bs3DPautoclose:false,bs3DPstartView:0,bs3DPminViewMode:0,bs3DPtodayBtn:false,bs3DPtodayHighlight:false,bs3DPclearBtn:false,bs3DPkeyboardNavigation:true,bs3DPlanguage:"en",bs3DPforceParse:true,bs3DPinputs:null,bs3DPbeforeShowDay:b.noop,bs3DPorientation:"auto",ajaxSettings:{type:"POST",dataType:"json"},toolbar:{hoverAnimation:true,hoverAnimationDuration:60,hoverAnimationEasing:undefined,items:[]},closeRequested:function(c,d){},formCreated:function(c,d){},formSubmitting:function(c,d){},formClosed:function(c,d){},loadingRecords:function(c,d){},recordsLoaded:function(c,d){},rowInserted:function(c,d){},rowsRemoved:function(c,d){},messages:{serverCommunicationError:"An error occured while communicating to the server.",loadingMessage:"Loading records...",noDataAvailable:"No data available!",areYouSure:"Are you sure?",save:"Save",saving:"Saving",cancel:"Cancel",error:"Error",close:"Close",cannotLoadOptionsFor:"Can not load options for field {0}"}},_$mainContainer:null,_$titleDiv:null,_$toolbarDiv:null,_$table:null,_$tableBody:null,_$tableRows:null,_$busyDiv:null,_$busyMessageDiv:null,_$errorDialogDiv:null,_columnList:null,_fieldList:null,_keyField:null,_firstDataColumnOffset:0,_lastPostData:null,_cache:null,_create:function(){this._normalizeFieldsOptions();this._initializeFields();this._createFieldAndColumnList();this._createMainContainer();this._createTableTitle();this._createToolBar();this._createTable();this._createBusyPanel();this._createErrorDialogDiv();this._addNoDataRow();this._cookieKeyPrefix=this._generateCookieKeyPrefix()},_normalizeFieldsOptions:function(){var c=this;b.each(c.options.fields,function(e,d){c._normalizeFieldOptions(e,d)})},_normalizeFieldOptions:function(f,e){if(typeof e.listClass!=="undefined"){e.listClass=""}if(typeof e.inputClass!=="undefined"){e.inputClass=""}if(e.dependsOn&&b.type(e.dependsOn)==="string"){var c=e.dependsOn.split(",");e.dependsOn=[];for(var d=0;d<c.length;d++){e.dependsOn.push(b.trim(c[d]))}}},_initializeFields:function(){this._lastPostData={};this._$tableRows=[];this._columnList=[];this._fieldList=[];this._cache=[]},_createFieldAndColumnList:function(){var c=this;b.each(c.options.fields,function(d,e){c._fieldList.push(d);if(e.key===true){c._keyField=d}if(e.list!==false&&e.type!=="hidden"){c._columnList.push(d)}})},_createMainContainer:function(){var c=this;this._$mainContainer=b("<div />").addClass("jtable-main-container").appendTo(this.element);this._jqueryuiThemeAddClass(this._$mainContainer,"ui-widget");this._bootstrap3AddClass(this._$mainContainer,"panel "+c.options.bs3PanelClass)},_createTableTitle:function(){var c=this;if(!c.options.title){return}var d=b("<div />").addClass("jtable-title").appendTo(c._$mainContainer);c._jqueryuiThemeAddClass(d,"ui-widget-header");c._bootstrap3AddClass(d,"panel-heading");var f=b("<div />").addClass("jtable-title-text").appendTo(d).append(b('<span class="jtable-title-text-container"/>').html(c.options.title));c._bootstrap3AddClass(f,"panel-title");if(c.options.showCloseButton){var e=b("<span />").html(c.options.messages.close);b("<button></button>").addClass("jtable-command-button jtable-close-button").attr("title",c.options.messages.close).append(e).appendTo(d).click(function(g){g.preventDefault();g.stopPropagation();c._onCloseRequested()})}c._$titleDiv=d},_createTable:function(){this._$table=b("<table></table>").addClass("jtable").appendTo(this._$mainContainer);if(this.options.tableId){this._$table.attr("id",this.options.tableId)}this._jqueryuiThemeAddClass(this._$table,"ui-widget-content");this._bootstrap3AddClass(this._$table,"table table-striped table-bordered table-hover table-condensed");this._createTableHead();this._createTableBody()},_createTableHead:function(){var c=b("<thead></thead>").appendTo(this._$table);this._addRowToTableHead(c)},_addRowToTableHead:function(c){var d=b("<tr></tr>").appendTo(c);this._addColumnsToHeaderRow(d)},_addColumnsToHeaderRow:function(e){for(var c=0;c<this._columnList.length;c++){var f=this._columnList[c];var d=this._createHeaderCellForField(f,this.options.fields[f]);d.appendTo(e)}},_createHeaderCellForField:function(g,f){f.width=f.width||"10%";var c=b("<span />").addClass("jtable-column-header-text").html(f.title);var e=b("<div />").addClass("jtable-column-header-container").append(c);var d=b("<th></th>").addClass("jtable-column-header").addClass(f.listClass).css("width",f.width).data("fieldName",g).append(e);this._jqueryuiThemeAddClass(d,"ui-state-default");return d},_createEmptyCommandHeader:function(){var c=b("<th></th>").addClass("jtable-command-column-header").css("width","1%");this._jqueryuiThemeAddClass(c,"ui-state-default");return c},_createTableBody:function(){this._$tableBody=b("<tbody></tbody>").appendTo(this._$table)},_createBusyPanel:function(){this._$busyMessageDiv=b("<div />").addClass("jtable-busy-message").prependTo(this._$mainContainer);this._$busyDiv=b("<div />").addClass("jtable-busy-panel-background").prependTo(this._$mainContainer);this._jqueryuiThemeAddClass(this._$busyMessageDiv,"ui-widget-header");this._hideBusy()},_createErrorDialogDiv:function(){var c=this;if(c.options.bootstrap3){c._$errorDialogDiv=b('<div class="modal fade" tabindex="-1" role="dialog" aria-hidden="true" style="z-index:9999;"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">'+c.options.messages.error+'</h4></div><div class="modal-body"></div><div class="modal-footer"><button type="button" class="btn '+c.options.bs3CancelBtnClass+'" data-dismiss="modal">'+c.options.messages.close+"</button></div></div></div></div>").appendTo(c._$mainContainer)}else{c._$errorDialogDiv=b("<div></div>").appendTo(c._$mainContainer);c._$errorDialogDiv.dialog({autoOpen:false,show:c.options.dialogShowEffect,hide:c.options.dialogHideEffect,modal:true,title:c.options.messages.error,buttons:[{text:c.options.messages.close,click:function(){c._$errorDialogDiv.dialog("close")}}]})}},load:function(c,d){this._lastPostData=c;this._reloadTable(d)},reload:function(c){this._reloadTable(c)},getRowByKey:function(d){for(var c=0;c<this._$tableRows.length;c++){if(d===this._getKeyValueOfRecord(this._$tableRows[c].data("record"))){return this._$tableRows[c]}}return null},destroy:function(){this.element.empty();b.Widget.prototype.destroy.call(this)},_setOption:function(c,d){},_reloadTable:function(e){var c=this;c._showBusy(c.options.messages.loadingMessage,c.options.loadingAnimationDelay);var d=c._createRecordLoadUrl();c._onLoadingRecords();c._ajax({url:d,data:c._lastPostData,success:function(f){c._hideBusy();if(f.Result!=="OK"){c._showError(f.Message);return}c._removeAllRows("reloading");c._addRecordsToTable(f.Records);c._onRecordsLoaded(f);if(e){e()}},error:function(){c._hideBusy();c._showError(c.options.messages.serverCommunicationError)}})},_createRecordLoadUrl:function(){return this.options.actions.listAction},_createRowFromRecord:function(c){var d=b("<tr></tr>").addClass("jtable-data-row").attr("data-record-key",this._getKeyValueOfRecord(c)).data("record",c);this._addCellsToRowUsingRecord(d);return d},_addCellsToRowUsingRecord:function(c){var d=c.data("record");for(var e=0;e<this._columnList.length;e++){this._createCellForRecordField(d,this._columnList[e]).appendTo(c)}},_createCellForRecordField:function(c,d){return b("<td></td>").addClass(this.options.fields[d].listClass).append((this._getDisplayTextForRecordField(c,d)))},_addRecordsToTable:function(d){var c=this;b.each(d,function(f,e){c._addRow(c._createRowFromRecord(e))});c._refreshRowStyles()},_addRowToTable:function(f,e,c,g){var d={index:this._normalizeNumber(e,0,this._$tableRows.length,this._$tableRows.length)};if(c===true){d.isNewRow=true}if(g===false){d.animationsEnabled=false}this._addRow(f,d)},_addRow:function(c,d){d=b.extend({index:this._$tableRows.length,isNewRow:false,animationsEnabled:true},d);if(this._$tableRows.length<=0){this._removeNoDataRow()}d.index=this._normalizeNumber(d.index,0,this._$tableRows.length,this._$tableRows.length);if(d.index===this._$tableRows.length){this._$tableBody.append(c);this._$tableRows.push(c)}else{if(d.index===0){this._$tableBody.prepend(c);this._$tableRows.unshift(c)}else{this._$tableRows[d.index-1].after(c);this._$tableRows.splice(d.index,0,c)}}this._onRowInserted(c,d.isNewRow);if(d.isNewRow){this._refreshRowStyles();if(this.options.animationsEnabled&&d.animationsEnabled){this._showNewRowAnimation(c)}}},_showNewRowAnimation:function(d){var c="jtable-row-created";if(this.options.jqueryuiTheme){c=c+" ui-state-highlight"}d.addClass(c,"slow","",function(){d.removeClass(c,5000)})},_removeRowsFromTable:function(d,e){var c=this;if(d.length<=0){return}d.addClass("jtable-row-removed").remove();d.each(function(){var f=c._findRowIndex(b(this));if(f>=0){c._$tableRows.splice(f,1)}});c._onRowsRemoved(d,e);if(c._$tableRows.length===0){c._addNoDataRow()}c._refreshRowStyles()},_findRowIndex:function(c){return this._findIndexInArray(c,this._$tableRows,function(e,d){return e.data("record")===d.data("record")})},_removeAllRows:function(d){if(this._$tableRows.length<=0){return}var c=this._$tableBody.find("tr.jtable-data-row");this._$tableBody.empty();this._$tableRows=[];this._onRowsRemoved(c,d);this._addNoDataRow()},_addNoDataRow:function(){if(this._$tableBody.find(">tr.jtable-no-data-row").length>0){return}var d=b("<tr></tr>").addClass("jtable-no-data-row").appendTo(this._$tableBody);var c=this._$table.find("thead th").length;b("<td></td>").attr("colspan",c).html(this.options.messages.noDataAvailable).appendTo(d)},_removeNoDataRow:function(){this._$tableBody.find(".jtable-no-data-row").remove()},_refreshRowStyles:function(){for(var c=0;c<this._$tableRows.length;c++){if(c%2===0){this._$tableRows[c].addClass("jtable-row-even")}else{this._$tableRows[c].removeClass("jtable-row-even")}}},_getDisplayTextForRecordField:function(c,g){var f=this.options.fields[g];var e=c[g];if(f.display){return f.display({record:c})}if(f.type==="date"){return this._getDisplayTextForDateRecordField(f,e)}else{if(f.type==="checkbox"){return this._getCheckBoxTextForFieldByValue(g,e)}else{if(f.options){var d=this._getOptionsForField(g,{record:c,value:e,source:"list",dependedValues:this._createDependedValuesUsingRecord(c,f.dependsOn)});return this._findOptionByValue(d,e).DisplayText}else{return e}}}},_createDependedValuesUsingRecord:function(c,e){if(!e){return{}}var d={};for(var f=0;f<e.length;f++){d[e[f]]=c[e[f]]}return d},_findOptionByValue:function(c,e){for(var d=0;d<c.length;d++){if(c[d].Value===e){return c[d]}}return{}},_getDisplayTextForDateRecordField:function(f,e){if(!e){return""}var c=f.displayFormat||this.options.defaultDateFormat;var d=this._parseDate(e);return b.mobiscroll.formatDate(c,d)},_getOptionsForField:function(i,f){var g=this.options.fields[i];var c=g.options;if(b.isFunction(c)){f=b.extend(true,{_cacheCleared:false,dependedValues:{},clearCache:function(){this._cacheCleared=true}},f);c=c(f)}var d;if(typeof c==="string"){var h="options_"+i+"_"+c;if(f._cacheCleared||(!this._cache[h])){this._cache[h]=this._buildOptionsFromArray(this._downloadOptions(i,c));this._sortFieldOptions(this._cache[h],g.optionsSorting)}else{if(typeof f.value!=="undefined"){var e=this._findOptionByValue(this._cache[h],f.value);if(typeof e.DisplayText!=="undefined"){this._cache[h]=this._buildOptionsFromArray(this._downloadOptions(i,c));this._sortFieldOptions(this._cache[h],g.optionsSorting)}}}d=this._cache[h]}else{if(jQuery.isArray(c)){d=this._buildOptionsFromArray(c);this._sortFieldOptions(d,g.optionsSorting)}else{d=this._buildOptionsArrayFromObject(c);this._sortFieldOptions(d,g.optionsSorting)}}return d},_downloadOptions:function(f,e){var c=this;var d=[];c._ajax({url:e,async:false,success:function(g){if(g.Result!=="OK"){c._showError(g.Message);return}d=g.Options},error:function(){var g=c._formatString(c.options.messages.cannotLoadOptionsFor,f);c._showError(g)}});return d},_sortFieldOptions:function(c,f){if((!c)||(!c.length)||(!f)){return}var d;if(f.indexOf("value")===0){d=function(g){return g.Value}}else{d=function(g){return g.DisplayText}}var e;if(b.type(d(c[0]))==="string"){e=function(h,g){return d(h).localeCompare(d(g))}}else{e=function(h,g){return d(h)-d(g)}}if(f.indexOf("desc")>0){c.sort(function(h,g){return e(g,h)})}else{c.sort(function(h,g){return e(h,g)})}},_buildOptionsArrayFromObject:function(c){var d=[];b.each(c,function(e,f){d.push({Value:e,DisplayText:f})});return d},_buildOptionsFromArray:function(c){var e=[];for(var d=0;d<c.length;d++){if(b.isPlainObject(c[d])){e.push(c[d])}else{e.push({Value:c[d],DisplayText:c[d]})}}return e},_parseDate:function(c){if(c.indexOf("Date")>=0){return new Date(parseInt(c.substr(6),10))}else{if(c.length===10){return new Date(parseInt(c.substr(0,4),10),parseInt(c.substr(5,2),10)-1,parseInt(c.substr(8,2),10))}else{if(c.length===19){return new Date(parseInt(c.substr(0,4),10),parseInt(c.substr(5,2),10)-1,parseInt(c.substr(8,2,10)),parseInt(c.substr(11,2),10),parseInt(c.substr(14,2),10),parseInt(c.substr(17,2),10))}else{this._logWarn("Given date is not properly formatted: "+c);return"format error!"}}}},_createToolBar:function(){var c=this;c._$toolbarDiv=b("<div />").addClass("jtable-toolbar pull-right").appendTo(c.options.bootstrap3?c._$titleDiv.find(".panel-title"):c._$titleDiv);for(var d=0;d<c.options.toolbar.items.length;d++){c._addToolBarItem(c.options.toolbar.items[d])}},_addToolBarItem:function(e){var d=this;if((typeof e==="undefined")||(typeof e.text==="undefined"&&typeof e.icon==="undefined")){this._logWarn("Can not add tool bar item since it is not valid!");this._logWarn(e);return null}if(!d.options.bootstrap3){var h=b("<span></span>").addClass("jtable-toolbar-item").appendTo(this._$toolbarDiv);this._jqueryuiThemeAddClass(h,"ui-widget ui-state-default ui-corner-all","ui-state-hover");if(e.cssClass){h.addClass(e.cssClass)}}else{var h=b("<button></button>").addClass("jtable-toolbar-item navbar-btn btn btn-primary").appendTo(this._$toolbarDiv)}if(e.tooltip){h.attr("title",e.tooltip)}if(e.icon){var c=b('<span class="jtable-toolbar-item-icon glyphicon"></span>').appendTo(h);if(e.icon===true){}else{if(typeof e.icon==="string"){c.css("background",'url("'+e.icon+'")')}}if(d.options.bootstrap3&&e.cssClass){c.addClass(e.cssClass)}}if(e.text&&!d.options.bootstrap3){b('<span class=""></span>').html(e.text).addClass("jtable-toolbar-item-text").appendTo(h)}else{h.attr("title",e.text)}if(e.click){h.click(function(){e.click()})}var g=undefined;var f=undefined;if(this.options.toolbar.hoverAnimation){g=this.options.toolbar.hoverAnimationDuration;f=this.options.toolbar.hoverAnimationEasing}h.hover(function(){h.addClass("jtable-toolbar-item-hover",g,f)},function(){h.removeClass("jtable-toolbar-item-hover",g,f)});return h},_showError:function(c){if(this.options.bootstrap3){this._$errorDialogDiv.find(".modal-body").html(c);this._$errorDialogDiv.modal("show").data("bs.modal").$backdrop.css("z-index","9998")}else{this._$errorDialogDiv.html(c).dialog("open")}},_setBusyTimer:null,_showBusy:function(f,d){var c=this;c._$busyDiv.width(c._$mainContainer.width()).height(c._$mainContainer.height()).addClass("jtable-busy-panel-background-invisible").show();var e=function(){c._$busyDiv.removeClass("jtable-busy-panel-background-invisible");c._$busyMessageDiv.html(f).show()};if(d){if(c._setBusyTimer){return}c._setBusyTimer=setTimeout(e,d)}else{e()}},_hideBusy:function(){clearTimeout(this._setBusyTimer);this._setBusyTimer=null;this._$busyDiv.hide();this._$busyMessageDiv.html("").hide()},_isBusy:function(){return this._$busyMessageDiv.is(":visible")},_jqueryuiThemeAddClass:function(c,e,d){if(!this.options.jqueryuiTheme){return}c.addClass(e);if(d){c.hover(function(){c.addClass(d)},function(){c.removeClass(d)})}},_bootstrap3AddClass:function(c,e,d){if(!this.options.bootstrap3){return}c.addClass(e);if(d){c.hover(function(){c.addClass(d)},function(){c.removeClass(d)})}},_performAjaxCall:function(e,c,f,g,d){this._ajax({url:e,data:c,async:f,success:g,error:d})},_ajax:function(c){var d=b.extend({},this.options.ajaxSettings,c);d.success=function(e){if(c.success){c.success(e)}};d.error=function(){if(c.error){c.error()}};d.complete=function(){if(c.complete){c.complete()}};b.ajax(d)},_getKeyValueOfRecord:function(c){return c[this._keyField]},_setCookie:function(d,e){d=this._cookieKeyPrefix+d;var c=new Date();c.setDate(c.getDate()+30);document.cookie=encodeURIComponent(d)+"="+encodeURIComponent(e)+"; expires="+c.toUTCString()},_getCookie:function(e){e=this._cookieKeyPrefix+e;var c=document.cookie.split("; ");for(var d=0;d<c.length;d++){if(!c[d]){continue}var f=c[d].split("=");if(f.length!==2){continue}if(decodeURIComponent(f[0])===e){return decodeURIComponent(f[1]||"")}}return null},_generateCookieKeyPrefix:function(){var c=function(g){var h=0;if(g.length===0){return h}for(var e=0;e<g.length;e++){var f=g.charCodeAt(e);h=((h<<5)-h)+f;h=h&h}return h};var d="";if(this.options.tableId){d=d+this.options.tableId+"#"}d=d+this._columnList.join("$")+"#c"+this._$table.find("thead th").length;return"jtable#"+c(d)},_onLoadingRecords:function(){this._trigger("loadingRecords",null,{})},_onRecordsLoaded:function(c){this._trigger("recordsLoaded",null,{records:c.Records,serverResponse:c})},_onRowInserted:function(d,c){this._trigger("rowInserted",null,{row:d,record:d.data("record"),isNewRow:c})},_onRowsRemoved:function(c,d){this._trigger("rowsRemoved",null,{rows:c,reason:d})},_onCloseRequested:function(){this._trigger("closeRequested",null,{})}})}(jQuery));(function(a){a.extend(true,a.hik.jtable.prototype,{_getPropertyOfObject:function(e,c){if(c.indexOf(".")<0){return e[c]}else{var b=c.substring(0,c.indexOf("."));var d=c.substring(c.indexOf(".")+1);return this._getPropertyOfObject(e[b],d)}},_setPropertyOfObject:function(f,d,c){if(d.indexOf(".")<0){f[d]=c}else{var b=d.substring(0,d.indexOf("."));var e=d.substring(d.indexOf(".")+1);this._setPropertyOfObject(f[b],e,c)}},_insertToArrayIfDoesNotExists:function(c,b){if(a.inArray(b,c)<0){c.push(b)}},_findIndexInArray:function(d,e,c){if(!c){c=function(g,f){return g===f}}for(var b=0;b<e.length;b++){if(c(d,e[b])){return b}}return -1},_normalizeNumber:function(e,d,b,c){if(typeof e==="undefined"||e===null||isNaN(e)){return c}if(e<d){return d}if(e>b){return b}return e},_formatString:function(){if(arguments.length===0){return null}var d=arguments[0];for(var b=1;b<arguments.length;b++){var c="{"+(b-1)+"}";d=d.replace(c,arguments[b])}return d},_logDebug:function(b){if(!window.console){return}console.log("jTable DEBUG: "+b)},_logInfo:function(b){if(!window.console){return}console.log("jTable INFO: "+b)},_logWarn:function(b){if(!window.console){return}console.log("jTable WARNING: "+b)},_logError:function(b){if(!window.console){return}console.log("jTable ERROR: "+b)}});if(!Array.prototype.indexOf){Array.prototype.indexOf=function(c){var b=this.length;var d=Number(arguments[1])||0;d=(d<0)?Math.ceil(d):Math.floor(d);if(d<0){d+=b}for(;d<b;d++){if(d in this&&this[d]===c){return d}}return -1}}})(jQuery);(function(a){a.extend(true,a.hik.jtable.prototype,{_submitFormUsingAjax:function(c,d,e,b){this._ajax({url:c,data:d,success:e,error:b})},_createInputLabelForRecordField:function(c){if(this.options.bootstrap3){var b=a("<label />").attr("for","Edit-"+c).addClass("control-label col-lg-4").html(this.options.fields[c].inputTitle||this.options.fields[c].title);if(this.options.fields[c].bs3LabelClass!==""&&typeof(this.options.fields[c].bs3LabelClass)!=="undefined"){b.addClass(this.options.fields[c].bs3LabelClass)}return b}else{return a("<div />").addClass("jtable-input-label").html(this.options.fields[c].inputTitle||this.options.fields[c].title)}},_createInputForRecordField:function(l){var k=this;var j=l.fieldName,i=l.value,d=l.record,e=l.formType,c=l.form;var h=k.options.fields[j];if(typeof i===undefined||i===null){i=h.defaultValue}if(h.input){var g=a(h.input({value:i,record:d,formType:e,form:c}));if(!g.attr("id")){g.attr("id","Edit-"+j)}var f=a("<div />").addClass("jtable-input jtable-custom-input").append(g);if(k.options.bs3UseFormGroup){f.addClass("form-group")}return f}var b=null;if(h.type==="date"){b=k._createDateInputForField(h,j,i)}else{if(h.type==="textarea"){b=k._createTextAreaForField(h,j,i)}else{if(h.type==="password"){b=k._createPasswordInputForField(h,j,i)}else{if(h.type==="checkbox"){b=k._createCheckboxForField(h,j,i)}else{if(h.options){if(h.type==="radiobutton"){b=k._createRadioButtonListForField(h,j,i,d,e)}else{b=k._createDropDownListForField(h,j,i,d,e,c)}}else{b=k._createTextInputForField(h,j,i)}}}}}if(this.options.bootstrap3){if(k.options.fields[j].bs3InputColClass!==""&&typeof(k.options.fields[j].bs3InputColClass)!=="undefined"){return a("<div />").addClass(k.options.fields[j].bs3InputColClass).append(b.find("input"))}else{return b.addClass("col-lg-8")}}else{return b}},_createInputForHidden:function(c,b){if(typeof b==="undefined"){b=""}return a('<input type="hidden" name="'+c+'" id="Edit-'+c+'"></input>').val(b)},_createDateInputForField:function(e,g,d){var c=this;var f=a('<input id="Edit-'+g+'" type="text" name="'+g+'"></input>');if(typeof e.inputClass!=="undefined"){f.addClass(e.inputClass)}if(typeof d!=="undefined"){f.val(d)}var b=e.displayFormat||c.options.defaultDateFormat;if(c.options.bootstrap3){f.addClass("form-control");if(c.options.useMobiScroll){f.scroller({preset:e.msPreset||c.options.msPreset,minDate:e.msMinDate||c.options.msMinDate,maxDate:e.msMaxDate||c.options.msMaxDate,stepMinute:e.msMaxDate||c.options.msStepMinute,theme:e.msTheme||c.options.msTheme,mode:e.msMode||c.options.msMode,display:e.msDisplay||c.options.msDisplay,lang:e.msLang||c.options.msLang})}else{f.addClass("datepicker");f.datepicker({format:b,weekStart:c.options.bs3DPweekStart,calendarWeeks:c.options.bs3DPcalendarWeeks,startDate:c.options.bs3DPstartDate,endDate:c.options.bs3DPendDate,daysOfWeekDisabled:c.options.bs3DPdaysOfWeekDisabled,autoclose:c.options.bs3DPautoclose,startView:c.options.bs3DPstartView,minViewMode:c.options.bs3DPminViewMode,todayBtn:c.options.bs3DPtodayBtn,todayHighlight:c.options.bs3DPtodayHighlight,clearBtn:c.options.bs3DPclearBtn,keyboardNavigation:c.options.bs3DPkeyboardNavigation,language:c.options.bs3DPlanguage,forceParse:c.options.bs3DPforceParse,inputs:c.options.bs3DPinputs,beforeShowDay:c.options.bs3DPbeforeShowDay,orientation:c.options.bs3DPorientation})}}else{f.datepicker({dateFormat:b})}return a("<div />").addClass("jtable-input jtable-date-input").append(f)},_createTextAreaForField:function(e,f,d){var b=this;var c=a('<textarea id="Edit-'+f+'" name="'+f+'"></textarea>');if(typeof e.inputClass!=="undefined"){c.addClass(e.inputClass)}if(typeof d!=="undefined"){c.val(d)}if(b.options.bootstrap3){c.addClass("form-control")}return a("<div />").addClass("jtable-input jtable-textarea-input").append(c)},_createTextInputForField:function(e,g,d){var b=this;var f=a('<input id="Edit-'+g+'" type="text" name="'+g+'"></input>');if(typeof e.inputClass!=="undefined"){f.addClass(e.inputClass)}if(b.options.bootstrap3){f.addClass("form-control")}if(typeof d!=="undefined"){f.val(d)}var c=a("<div />").addClass("jtable-input jtable-text-input").append(f);return c},_createPasswordInputForField:function(d,f,c){var b=this;var e=a('<input id="Edit-'+f+'" type="password" name="'+f+'"></input>');if(typeof d.inputClass!=="undefined"){e.addClass(d.inputClass)}if(b.options.bootstrap3){e.addClass("form-control")}if(typeof c!=="undefined"){e.val(c)}return a("<div />").addClass("jtable-input jtable-password-input").append(e)},_createCheckboxForField:function(f,h,g){var j=this;if(typeof g==="undefined"){g=j._getCheckBoxPropertiesForFieldByState(h,false).Value}var i=a("<div />").addClass("jtable-input jtable-checkbox-input");if(j.options.bootstrap3){var c=a('<div class="checkbox" />').appendTo(i)}var d=a('<input id="Edit-'+h+'" type="checkbox" name="'+h+'" />');if(j.options.bootstrap3){d.appendTo(c)}else{d.appendTo(i)}if(typeof f.inputClass!=="undefined"){d.addClass(f.inputClass)}if(typeof g!=="undefined"){d.val(g)}var e=a("<span>"+(f.formText||j._getCheckBoxTextForFieldByValue(h,g))+"</span>");if(j.options.bootstrap3){e.appendTo(c)}else{e.appendTo(i)}if(j._getIsCheckBoxSelectedForFieldByValue(h,g)){d.attr("checked","checked")}var b=function(){var k=j._getCheckBoxPropertiesForFieldByState(h,d.is(":checked"));d.attr("value",k.Value);e.html(f.formText||k.DisplayText)};d.click(function(){b()});if(f.setOnTextClick!==false){e.addClass("jtable-option-text-clickable").click(function(){if(d.is(":checked")){d.attr("checked",false)}else{d.attr("checked",true)}b()})}return i},_createDropDownListForField:function(f,h,g,e,b,c){var i=a("<div />").addClass("jtable-input jtable-dropdown-input");var d=a('<select class="'+f.inputClass+'" id="Edit-'+h+'" name="'+h+'"></select>').appendTo(i);var j=this._getOptionsForField(h,{record:e,source:b,form:c,dependedValues:this._createDependedValuesUsingForm(c,f.dependsOn)});this._fillDropDownListWithOptions(d,j,g);return i},_fillDropDownListWithOptions:function(c,b,e){c.empty();for(var d=0;d<b.length;d++){a("<option"+(b[d].Value===e?' selected="selected"':"")+">"+b[d].DisplayText+"</option>").val(b[d].Value).appendTo(c)}},_createDependedValuesUsingForm:function(c,e){if(!e){return{}}var d={};for(var f=0;f<e.length;f++){var g=e[f];var b=c.find("select[name="+g+"]");if(b.length<=0){continue}d[g]=b.val()}return d},_createRadioButtonListForField:function(h,i,g,c,f){var d=this;var b=a("<div />").addClass("jtable-input jtable-radiobuttonlist-input");var e=d._getOptionsForField(i,{record:c,source:f});a.each(e,function(l,m){var o=a('<div class=""></div>').addClass("jtable-radio-input").appendTo(b);if(d.options.bootstrap3){var k=a('<div class="radio" />').appendTo(o)}var j=a('<input type="radio" id="Edit-'+i+"-"+l+'" cname="'+i+'"'+((m.Value===(g+""))?' checked="true"':"")+" />").val(m.Value);if(d.options.bootstrap3){j.appendTo(k)}else{j.appendTo(o)}if(typeof h.inputClass!=="undefined"){j.addClass(h.inputClass)}var n=a("<span></span>").html(m.DisplayText);if(d.options.bootstrap3){n.appendTo(k)}else{n.appendTo(o)}if(h.setOnTextClick!==false){n.addClass("jtable-option-text-clickable").click(function(){if(!j.is(":checked")){j.attr("checked",true)}})}});return b},_getCheckBoxTextForFieldByValue:function(c,b){return this.options.fields[c].values[b]},_getIsCheckBoxSelectedForFieldByValue:function(c,b){return(this._createCheckBoxStateArrayForFieldWithCaching(c)[1].Value.toString()===b.toString())},_getCheckBoxPropertiesForFieldByState:function(c,b){return this._createCheckBoxStateArrayForFieldWithCaching(c)[(b?1:0)]},_createCheckBoxStateArrayForFieldWithCaching:function(c){var b="checkbox_"+c;if(!this._cache[b]){this._cache[b]=this._createCheckBoxStateArrayForField(c)}return this._cache[b]},_createCheckBoxStateArrayForField:function(d){var c=[];var b=0;a.each(this.options.fields[d].values,function(e,f){if(b++<2){c.push({Value:e,DisplayText:f})}});return c},_makeCascadeDropDowns:function(d,b,e){var c=this;d.find("select").each(function(){var f=a(this);var h=f.attr("name");if(!h){return}var g=c.options.fields[h];if(!g.dependsOn){return}a.each(g.dependsOn,function(i,k){var j=d.find("select[name="+k+"]");j.change(function(){var m={record:b,source:e,form:d,dependedValues:{}};m.dependedValues=c._createDependedValuesUsingForm(d,g.dependsOn);var l=c._getOptionsForField(h,m);c._fillDropDownListWithOptions(f,l,undefined);f.change()})})})},_updateRecordValuesFromForm:function(d,n){for(var c=0;c<this._fieldList.length;c++){var l=this._fieldList[c];var h=this.options.fields[l];if(h.edit===false){continue}var k=n.find('[name="'+l+'"]');if(k.length<=0){continue}if(h.type==="date"){var j=k.val();if(j){var m=h.displayFormat||this.options.defaultDateFormat;try{var b=a.mobiscroll.formatDate(m,j);d[l]="/Date("+b.getTime()+")/"}catch(g){this._logWarn("Date format is incorrect for field "+l+": "+j);d[l]=undefined}}else{this._logDebug("Date is empty for "+l);d[l]=undefined}}else{if(h.options&&h.type==="radiobutton"){var f=k.filter(":checked");if(f.length){d[l]=f.val()}else{d[l]=undefined}}else{d[l]=k.val()}}}},_setEnabledOfDialogButton:function(d,b,c){if(!d){return}if(b!==false){d.removeAttr("disabled").removeClass("ui-state-disabled")}else{d.attr("disabled","disabled").addClass("ui-state-disabled")}if(c){if(d.has("span").length){d.find("span").text(c)}else{d.text(c)}}}})})(jQuery);(function(b){var a={_create:b.hik.jtable.prototype._create};b.extend(true,b.hik.jtable.prototype,{options:{recordAdded:function(c,d){},messages:{addNewRecord:"Add new record"}},_$addRecordDiv:null,_create:function(){a._create.apply(this,arguments);this._createAddRecordDialogDiv()},_createAddRecordDialogDiv:function(){var c=this;if(!c.options.actions.createAction){return}c._$addRecordDiv=b("<div />").appendTo(c._$mainContainer);if(c.options.bootstrap3){var e="createModal"+Math.floor((Math.random()*10000)+1);var d=b('<button id="AddRecordDialogSaveButton" type="button" class="btn '+c.options.bs3OkBtnClass+'">'+c.options.messages.save+"</button>");c._$addRecordDiv.addClass("modal fade").attr("id",e).attr("role","dialog").attr("tabindex","-1").attr("aria-hidden","true").attr("aria-labelledby",e+"Title");b("<div />").addClass("modal-dialog").append(b("<div />").addClass("modal-content").append(b("<div />").addClass("modal-header").append('<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title" id="'+e+'Title">'+c.options.messages.addNewRecord+"</h4>")).append(b("<div />").addClass("modal-body")).append(b("<div />").addClass("modal-footer").append('<button type="button" class="btn '+c.options.bs3CancelBtnClass+'" data-dismiss="modal">'+c.options.messages.cancel+"</button>").append(d))).appendTo(c._$addRecordDiv);c._$addRecordDiv.on("hidden.bs.modal",function(){var f=c._$addRecordDiv.find("form").first();var g=b("#AddRecordDialogSaveButton");c._trigger("formClosed",null,{form:f,formType:"create"});c._setEnabledOfDialogButton(g,true,c.options.messages.save);f.remove()});d.on("click",function(){var f=c._$addRecordDiv.find("form");if(c._trigger("formSubmitting",null,{form:f,formType:"create"})!==false){c._setEnabledOfDialogButton(d,false,c.options.messages.saving);c._saveAddRecordForm(f,d)}})}else{c._$addRecordDiv.dialog({autoOpen:false,show:c.options.dialogShowEffect,hide:c.options.dialogHideEffect,width:"auto",minWidth:"300",modal:true,title:c.options.messages.addNewRecord,buttons:[{text:c.options.messages.cancel,click:function(){c._$addRecordDiv.dialog("close")}},{id:"AddRecordDialogSaveButton",text:c.options.messages.save,click:function(){var g=b("#AddRecordDialogSaveButton");var f=c._$addRecordDiv.find("form");if(c._trigger("formSubmitting",null,{form:f,formType:"create"})!==false){c._setEnabledOfDialogButton(g,false,c.options.messages.saving);c._saveAddRecordForm(f,g)}}}],close:function(){var f=c._$addRecordDiv.find("form").first();var g=b("#AddRecordDialogSaveButton");c._trigger("formClosed",null,{form:f,formType:"create"});c._setEnabledOfDialogButton(g,true,c.options.messages.save);f.remove()}})}if(c.options.addRecordButton){c.options.addRecordButton.click(function(f){f.preventDefault();c._showAddRecordForm()})}else{c._addToolBarItem({icon:true,cssClass:"jtable-toolbar-item-add-record glyphicon-plus",text:c.options.messages.addNewRecord,click:function(){c._showAddRecordForm()}})}},showCreateForm:function(){this._showAddRecordForm()},addRecord:function(d){var c=this;d=b.extend({clientOnly:false,animationsEnabled:c.options.animationsEnabled,url:c.options.actions.createAction,success:function(){},error:function(){}},d);if(!d.record){c._logWarn("options parameter in addRecord method must contain a record property.");return}if(d.clientOnly){c._addRow(c._createRowFromRecord(d.record),{isNewRow:true,animationsEnabled:d.animationsEnabled});d.success();return}c._submitFormUsingAjax(d.url,b.param(d.record),function(e){if(e.Result!=="OK"){c._showError(e.Message);d.error(e);return}if(!e.Record){c._logError("Server must return the created Record object.");d.error(e);return}c._onRecordAdded(e);c._addRow(c._createRowFromRecord(e.Record),{isNewRow:true,animationsEnabled:d.animationsEnabled});d.success(e)},function(){c._showError(c.options.messages.serverCommunicationError);d.error()})},_showAddRecordForm:function(){var e=this;var c=b('<form id="jtable-create-form" class="jtable-dialog-form jtable-create-form" action="'+e.options.actions.createAction+'" method="POST" role="form"></form>');if(e.options.bootstrap3){if(e.options.bs3FormClass==="inline"){c.addClass("form-inline")}else{if(e.options.bs3FormClass==="horizontal"){c.addClass("form-horizontal")}}}for(var f=0;f<e._fieldList.length;f++){var h=e._fieldList[f];var g=e.options.fields[h];if(g.key===true&&g.create!==true){continue}if(g.create===false){continue}if(g.type==="hidden"){c.append(e._createInputForHidden(h,g.defaultValue));continue}var d=b("<div />").addClass("jtable-input-field-container").appendTo(c);if(e.options.bootstrap3&&e.options.bs3UseFormGroup){d.addClass("form-group")}d.append(e._createInputLabelForRecordField(h));d.append(e._createInputForRecordField({fieldName:h,formType:"create",form:c}))}e._makeCascadeDropDowns(c,undefined,"create");if(e.options.bootstrap3){e._$addRecordDiv.find(".modal-body").append(c);e._$addRecordDiv.modal("show")}else{e._$addRecordDiv.append(c).dialog("open")}e._trigger("formCreated",null,{form:c,formType:"create"})},_saveAddRecordForm:function(c,e){var d=this;c.data("submitting",true);d._submitFormUsingAjax(c.attr("action"),c.serialize(),function(f){if(f.Result!=="OK"){d._showError(f.Message);d._setEnabledOfDialogButton(e,true,d.options.messages.save);return}if(!f.Record){d._logError("Server must return the created Record object.");d._setEnabledOfDialogButton(e,true,d.options.messages.save);return}d._onRecordAdded(f);d._addRow(d._createRowFromRecord(f.Record),{isNewRow:true});if(d.options.bootstrap3){d._$addRecordDiv.modal("hide")}else{d._$addRecordDiv.dialog("close")}},function(){d._showError(d.options.messages.serverCommunicationError);d._setEnabledOfDialogButton(e,true,d.options.messages.save)})},_onRecordAdded:function(c){this._trigger("recordAdded",null,{record:c.Record,serverResponse:c})}})})(jQuery);(function(b){var a={_create:b.hik.jtable.prototype._create,_addColumnsToHeaderRow:b.hik.jtable.prototype._addColumnsToHeaderRow,_addCellsToRowUsingRecord:b.hik.jtable.prototype._addCellsToRowUsingRecord};b.extend(true,b.hik.jtable.prototype,{options:{recordUpdated:function(c,d){},rowUpdated:function(c,d){},messages:{editRecord:"Edit Record"}},_$editDiv:null,_$editingRow:null,_create:function(){a._create.apply(this,arguments);this._createEditDialogDiv()},_createEditDialogDiv:function(){var c=this;c._$editDiv=b("<div></div>").appendTo(c._$mainContainer);if(c.options.bootstrap3){var e="createModal"+Math.floor((Math.random()*10000)+1);var d=b('<button id="EditRecordDialogSaveButton" type="button" class="btn btn-primary">'+c.options.messages.save+"</button>");c._$editDiv.addClass("modal fade").attr("id",e).attr("role","dialog").attr("tabindex","-1").attr("aria-hidden","true").attr("aria-labelledby",e+"Title");b("<div />").addClass("modal-dialog").append(b("<div />").addClass("modal-content").append(b("<div />").addClass("modal-header").append('<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title" id="'+e+'Title">'+c.options.messages.editRecord+"</h4>")).append(b("<div />").addClass("modal-body").append(c._$editDiv.find("form:first"))).append(b("<div />").addClass("modal-footer").append('<button type="button" class="btn btn-default" data-dismiss="modal">'+c.options.messages.cancel+"</button>").append(d))).appendTo(c._$editDiv);c._$editDiv.on("hidden.bs.modal",function(){var f=c._$addRecordDiv.find("form").first();var g=b("#EditRecordDialogSaveButton");c._trigger("formClosed",null,{form:f,formType:"create"});c._setEnabledOfDialogButton(g,true,c.options.messages.save);f.remove()});d.on("click",function(){var f=c._$editDiv.find("form");if(c._trigger("formSubmitting",null,{form:f,formType:"create"})!==false){c._setEnabledOfDialogButton(d,false,c.options.messages.saving);c._saveAddRecordForm(f,d)}})}else{c._$editDiv.dialog({autoOpen:false,show:c.options.dialogShowEffect,hide:c.options.dialogHideEffect,width:"auto",minWidth:"300",modal:true,title:c.options.messages.editRecord,buttons:[{text:c.options.messages.cancel,click:function(){c._$editDiv.dialog("close")}},{id:"EditDialogSaveButton",text:c.options.messages.save,click:function(){if(c._$editingRow.hasClass("jtable-row-removed")){c._$editDiv.dialog("close");return}var g=c._$editDiv.find("#EditDialogSaveButton");var f=c._$editDiv.find("form");if(c._trigger("formSubmitting",null,{form:f,formType:"edit",row:c._$editingRow})!==false){c._setEnabledOfDialogButton(g,false,c.options.messages.saving);c._saveEditForm(f,g)}}}],close:function(){var f=c._$editDiv.find("form:first");var g=b("#EditDialogSaveButton");c._trigger("formClosed",null,{form:f,formType:"edit",row:c._$editingRow});c._setEnabledOfDialogButton(g,true,c.options.messages.save);f.remove()}})}},updateRecord:function(d){var c=this;d=b.extend({clientOnly:false,animationsEnabled:c.options.animationsEnabled,url:c.options.actions.updateAction,success:function(){},error:function(){}},d);if(!d.record){c._logWarn("options parameter in updateRecord method must contain a record property.");return}var f=c._getKeyValueOfRecord(d.record);if(typeof f==="undefined"||f===null){c._logWarn("options parameter in updateRecord method must contain a record that contains the key field property.");return}var e=c.getRowByKey(f);if(e===null){c._logWarn("Can not found any row by key: "+f);return}if(d.clientOnly){b.extend(e.data("record"),d.record);c._updateRowTexts(e);c._onRecordUpdated(e,null);if(d.animationsEnabled){c._showUpdateAnimationForRow(e)}d.success();return}c._submitFormUsingAjax(d.url,b.param(d.record),function(g){if(g.Result!=="OK"){c._showError(g.Message);d.error(g);return}b.extend(e.data("record"),d.record);c._updateRecordValuesFromServerResponse(e.data("record"),g);c._updateRowTexts(e);c._onRecordUpdated(e,g);if(d.animationsEnabled){c._showUpdateAnimationForRow(e)}d.success(g)},function(){c._showError(c.options.messages.serverCommunicationError);d.error()})},_addColumnsToHeaderRow:function(c){a._addColumnsToHeaderRow.apply(this,arguments);if(this.options.actions.updateAction!==undefined){c.append(this._createEmptyCommandHeader())}},_addCellsToRowUsingRecord:function(c){var e=this;a._addCellsToRowUsingRecord.apply(this,arguments);if(e.options.actions.updateAction!==undefined){var d=b("<span></span>");if(e.options.bootstrap3){d.addClass("glyphicon glyphicon-pencil")}else{d.html(e.options.messages.editRecord)}var f=b('<button title="'+e.options.messages.editRecord+'"></button>').addClass("jtable-command-button jtable-edit-command-button").append(d).click(function(g){g.preventDefault();g.stopPropagation();e._showEditForm(c)});if(e.options.bootstrap3){f.addClass("btn btn-primary")}b("<td></td>").addClass("jtable-command-column").append(f).appendTo(c)}},_showEditForm:function(h){var m=this;var f=h.data("record");var d=b('<form id="jtable-edit-form" class="jtable-dialog-form jtable-edit-form" action="'+m.options.actions.updateAction+'" method="POST"></form>');if(m.options.bootstrap3){d.addClass("form-horizontal")}for(var e=0;e<m._fieldList.length;e++){var l=m._fieldList[e];var j=m.options.fields[l];var c=f[l];if(j.key===true){if(j.edit!==true){d.append(m._createInputForHidden(l,c));continue}else{d.append(m._createInputForHidden("jtRecordKey",c))}}if(j.edit===false){continue}if(j.type==="hidden"){d.append(m._createInputForHidden(l,c));continue}var g=b('<div class="jtable-input-field-container"></div>').appendTo(d);if(m.options.bootstrap3){g.addClass("form-group")}g.append(m._createInputLabelForRecordField(l));var k=m._getValueForRecordField(f,l);g.append(m._createInputForRecordField({fieldName:l,value:k,record:f,formType:"edit",form:d}))}m._makeCascadeDropDowns(d,f,"edit");m._$editingRow=h;if(m.options.bootstrap3){m._$editDiv.find(".modal-body").empty().append(d);m._$editDiv.modal("show")}else{m._$editDiv.append(d).dialog("open")}m._trigger("formCreated",null,{form:d,formType:"edit",record:f,row:h})},_saveEditForm:function(d,e){var c=this;c._submitFormUsingAjax(d.attr("action"),d.serialize(),function(g){if(g.Result!=="OK"){c._showError(g.Message);c._setEnabledOfDialogButton(e,true,c.options.messages.save);return}var f=c._$editingRow.data("record");c._updateRecordValuesFromForm(f,d);c._updateRecordValuesFromServerResponse(f,g);c._updateRowTexts(c._$editingRow);c._$editingRow.attr("data-record-key",c._getKeyValueOfRecord(f));c._onRecordUpdated(c._$editingRow,g);if(c.options.animationsEnabled){c._showUpdateAnimationForRow(c._$editingRow)}c._$editDiv.dialog("close")},function(){c._showError(c.options.messages.serverCommunicationError);c._setEnabledOfDialogButton(e,true,c.options.messages.save)})},_updateRecordValuesFromServerResponse:function(c,d){if(!d||!d.Record){return}b.extend(true,c,d.Record)},_getValueForRecordField:function(c,f){var e=this.options.fields[f];var d=c[f];if(e.type==="date"){return this._getDisplayTextForDateRecordField(e,d)}else{return d}},_updateRowTexts:function(g){var d=g.data("record");var c=g.find("td");for(var f=0;f<this._columnList.length;f++){var e=this._getDisplayTextForRecordField(d,this._columnList[f]);c.eq(this._firstDataColumnOffset+f).html(e||"")}this._onRowUpdated(g)},_showUpdateAnimationForRow:function(d){var c="jtable-row-updated";if(this.options.jqueryuiTheme){c=c+" ui-state-highlight"}d.stop(true,true).addClass(c,"slow","",function(){d.removeClass(c,5000)})},_onRowUpdated:function(c){this._trigger("rowUpdated",null,{row:c,record:c.data("record")})},_onRecordUpdated:function(c,d){this._trigger("recordUpdated",null,{record:c.data("record"),row:c,serverResponse:d})}})})(jQuery);(function(b){var a={_create:b.hik.jtable.prototype._create,_addColumnsToHeaderRow:b.hik.jtable.prototype._addColumnsToHeaderRow,_addCellsToRowUsingRecord:b.hik.jtable.prototype._addCellsToRowUsingRecord};b.extend(true,b.hik.jtable.prototype,{options:{deleteConfirmation:true,recordDeleted:function(c,d){},messages:{deleteConfirmation:"This record will be deleted. Are you sure?",deleteText:"Delete",deleting:"Deleting",canNotDeletedRecords:"Can not delete {0} of {1} records!",deleteProggress:"Deleting {0} of {1} records, processing..."}},_$deleteRecordDiv:null,_$deletingRow:null,_create:function(){a._create.apply(this,arguments);this._createDeleteDialogDiv()},_createDeleteDialogDiv:function(){var c=this;c._$deleteRecordDiv=b('<div><p><span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span><span class="jtable-delete-confirm-message"></span></p></div>').appendTo(c._$mainContainer);if(c.options.bootstrap3){c._$deleteRecordDiv.find("span.ui-icon").attr("class","glyphicon glyphicon-warning-sign");var e="createModal"+Math.floor((Math.random()*10000)+1);var d=b('<button id="DelRecordDialogSaveButton" type="button" class="btn btn-primary">'+c.options.messages.deleteText+"</button>");c._$deleteRecordDiv.addClass("modal fade").attr("id",e).attr("role","dialog").attr("tabindex","-1").attr("aria-hidden","true").attr("aria-labelledby",e+"Title");b("<div />").addClass("modal-dialog").append(b("<div />").addClass("modal-content").append(b("<div />").addClass("modal-header").append('<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title" id="'+e+'Title">'+c.options.messages.areYouSure+"</h4>")).append(b("<div />").addClass("modal-body").append(c._$deleteRecordDiv.find("p"))).append(b("<div />").addClass("modal-footer").append('<button type="button" class="btn btn-default" data-dismiss="modal">'+c.options.messages.cancel+"</button>").append(d))).appendTo(c._$deleteRecordDiv);c._$deleteRecordDiv.on("hidden.bs.modal",function(){var f=c._$addRecordDiv.find("form").first();var g=b("#DelRecordDialogSaveButton");c._trigger("formClosed",null,{form:f,formType:"create"});c._setEnabledOfDialogButton(g,true,c.options.messages.save);f.remove()});d.on("click",function(){if(c._$deletingRow.hasClass("jtable-row-removed")){c._$deleteRecordDiv.modal("hide");return}var f=b("#DeleteDialogButton");c._setEnabledOfDialogButton(f,false,c.options.messages.deleting);c._deleteRecordFromServer(c._$deletingRow,function(){c._removeRowsFromTableWithAnimation(c._$deletingRow);c._$deleteRecordDiv.modal("hide")},function(g){c._showError(g);c._setEnabledOfDialogButton(f,true,c.options.messages.deleteText)})})}else{c._$deleteRecordDiv.dialog({autoOpen:false,show:c.options.dialogShowEffect,hide:c.options.dialogHideEffect,modal:true,title:c.options.messages.areYouSure,buttons:[{text:c.options.messages.cancel,click:function(){c._$deleteRecordDiv.dialog("close")}},{id:"DeleteDialogButton",text:c.options.messages.deleteText,click:function(){if(c._$deletingRow.hasClass("jtable-row-removed")){c._$deleteRecordDiv.dialog("close");return}var f=b("#DeleteDialogButton");c._setEnabledOfDialogButton(f,false,c.options.messages.deleting);c._deleteRecordFromServer(c._$deletingRow,function(){c._removeRowsFromTableWithAnimation(c._$deletingRow);c._$deleteRecordDiv.dialog("close")},function(g){c._showError(g);c._setEnabledOfDialogButton(f,true,c.options.messages.deleteText)})}}],close:function(){var f=b("#DeleteDialogButton");c._setEnabledOfDialogButton(f,true,c.options.messages.deleteText)}})}},deleteRows:function(e){var d=this;if(e.length<=0){d._logWarn("No rows specified to jTable deleteRows method.");return}if(d._isBusy()){d._logWarn("Can not delete rows since jTable is busy!");return}if(e.length===1){d._deleteRecordFromServer(e,function(){d._removeRowsFromTableWithAnimation(e)},function(i){d._showError(i)});return}d._showBusy(d._formatString(d.options.messages.deleteProggress,0,e.length));var c=0;var g=function(){return(c>=e.length)};var f=function(){var i=e.filter(".jtable-row-ready-to-remove");if(i.length<e.length){d._showError(d._formatString(d.options.messages.canNotDeletedRecords,e.length-i.length,e.length))}if(i.length>0){d._removeRowsFromTableWithAnimation(i)}d._hideBusy()};var h=0;e.each(function(){var i=b(this);d._deleteRecordFromServer(i,function(){++h;++c;i.addClass("jtable-row-ready-to-remove");d._showBusy(d._formatString(d.options.messages.deleteProggress,h,e.length));if(g()){f()}},function(){++c;if(g()){f()}})})},deleteRecord:function(d){var c=this;d=b.extend({clientOnly:false,animationsEnabled:c.options.animationsEnabled,url:c.options.actions.deleteAction,success:function(){},error:function(){}},d);if(typeof d.key==="undefined"){c._logWarn("options parameter in deleteRecord method must contain a key property.");return}var e=c.getRowByKey(d.key);if(e===null){c._logWarn("Can not found any row by key: "+d.key);return}if(d.clientOnly){c._removeRowsFromTableWithAnimation(e,d.animationsEnabled);d.success();return}c._deleteRecordFromServer(e,function(f){c._removeRowsFromTableWithAnimation(e,d.animationsEnabled);d.success(f)},function(f){c._showError(f);d.error(f)},d.url)},_addColumnsToHeaderRow:function(c){a._addColumnsToHeaderRow.apply(this,arguments);if(typeof this.options.actions.deleteAction!==undefined){c.append(this._createEmptyCommandHeader())}},_addCellsToRowUsingRecord:function(c){a._addCellsToRowUsingRecord.apply(this,arguments);var e=this;if(typeof e.options.actions.deleteAction!==undefined){var d=b("<span></span>");if(e.options.bootstrap3){d.addClass("glyphicon glyphicon-trash")}else{d.html(e.options.messages.deleteText)}var f=b('<button title="'+e.options.messages.deleteText+'"></button>').addClass("jtable-command-button jtable-delete-command-button").append(d).click(function(g){g.preventDefault();g.stopPropagation();e._deleteButtonClickedForRow(c)});if(e.options.bootstrap3){f.addClass("btn btn-danger")}b("<td></td>").addClass("jtable-command-column").append(f).appendTo(c)}},_deleteButtonClickedForRow:function(c){var d=this;var f;var e=d.options.messages.deleteConfirmation;if(b.isFunction(d.options.deleteConfirmation)){var g={row:c,record:c.data("record"),deleteConfirm:true,deleteConfirmMessage:e,cancel:false,cancelMessage:null};d.options.deleteConfirmation(g);if(g.cancel){if(g.cancelMessage){d._showError(g.cancelMessage)}return}e=g.deleteConfirmMessage;f=g.deleteConfirm}else{f=d.options.deleteConfirmation}if(f!==false){d._$deleteRecordDiv.find(".jtable-delete-confirm-message").html(e);d._showDeleteDialog(c)}else{d._deleteRecordFromServer(c,function(){d._removeRowsFromTableWithAnimation(c)},function(h){d._showError(h)})}},_showDeleteDialog:function(c){var d=this;d._$deletingRow=c;if(d.options.bootstrap3){d._$deleteRecordDiv.modal("show")}else{d._$deleteRecordDiv.dialog("open")}},_deleteRecordFromServer:function(c,h,g,f){var e=this;if(c.data("deleting")===true){return}c.data("deleting",true);var d={};d[e._keyField]=e._getKeyValueOfRecord(c.data("record"));this._ajax({url:(f||e.options.actions.deleteAction),data:d,success:function(i){if(i.Result!=="OK"){c.data("deleting",false);if(g){g(i.Message)}return}e._trigger("recordDeleted",null,{record:c.data("record"),row:c,serverResponse:i});if(h){h(i)}},error:function(){c.data("deleting",false);if(g){g(e.options.messages.serverCommunicationError)}}})},_removeRowsFromTableWithAnimation:function(d,f){var c=this;if(typeof f==="undefined"){f=c.options.animationsEnabled}if(f){var e="jtable-row-deleting";if(this.options.jqueryuiTheme){e=e+" ui-state-disabled"}d.stop(true,true).addClass(e,"slow","").promise().done(function(){c._removeRowsFromTable(d,"deleted")})}else{c._removeRowsFromTable(d,"deleted")}}})})(jQuery);(function(b){var a={_create:b.hik.jtable.prototype._create,_addColumnsToHeaderRow:b.hik.jtable.prototype._addColumnsToHeaderRow,_addCellsToRowUsingRecord:b.hik.jtable.prototype._addCellsToRowUsingRecord,_onLoadingRecords:b.hik.jtable.prototype._onLoadingRecords,_onRecordsLoaded:b.hik.jtable.prototype._onRecordsLoaded,_onRowsRemoved:b.hik.jtable.prototype._onRowsRemoved};b.extend(true,b.hik.jtable.prototype,{options:{selecting:false,multiselect:false,selectingCheckboxes:false,selectOnRowClick:true,selectionChanged:function(c,d){}},_selectedRecordIdsBeforeLoad:null,_$selectAllCheckbox:null,_shiftKeyDown:false,_create:function(){if(this.options.selecting&&this.options.selectingCheckboxes){++this._firstDataColumnOffset;this._bindKeyboardEvents()}a._create.apply(this,arguments)},_bindKeyboardEvents:function(){var c=this;b(document).keydown(function(d){switch(d.which){case 16:c._shiftKeyDown=true;break}}).keyup(function(d){switch(d.which){case 16:c._shiftKeyDown=false;break}})},selectedRows:function(){return this._getSelectedRows()},selectRows:function(c){this._selectRows(c);this._onSelectionChanged()},_addColumnsToHeaderRow:function(c){if(this.options.selecting&&this.options.selectingCheckboxes){if(this.options.multiselect){c.append(this._createSelectAllHeader())}else{c.append(this._createEmptyCommandHeader())}}a._addColumnsToHeaderRow.apply(this,arguments)},_addCellsToRowUsingRecord:function(c){if(this.options.selecting){this._makeRowSelectable(c)}a._addCellsToRowUsingRecord.apply(this,arguments)},_onLoadingRecords:function(){if(this.options.selecting){this._storeSelectionList()}a._onLoadingRecords.apply(this,arguments)},_onRecordsLoaded:function(){if(this.options.selecting){this._restoreSelectionList()}a._onRecordsLoaded.apply(this,arguments)},_onRowsRemoved:function(c,d){if(this.options.selecting&&(d!=="reloading")&&(c.filter(".jtable-row-selected").length>0)){this._onSelectionChanged()}a._onRowsRemoved.apply(this,arguments)},_createSelectAllHeader:function(){var c=this;var d=b('<th class=""></th>').addClass("jtable-command-column-header jtable-column-header-selecting");this._jqueryuiThemeAddClass(d,"ui-state-default");var e=b("<div />").addClass("jtable-column-header-container").appendTo(d);c._$selectAllCheckbox=b('<input type="checkbox" />').appendTo(e).click(function(){if(c._$tableRows.length<=0){c._$selectAllCheckbox.attr("checked",false);return}var f=c._$tableBody.find(">tr.jtable-data-row");if(c._$selectAllCheckbox.is(":checked")){c._selectRows(f)}else{c._deselectRows(f)}c._onSelectionChanged()});return d},_storeSelectionList:function(){var c=this;if(!c.options.selecting){return}c._selectedRecordIdsBeforeLoad=[];c._getSelectedRows().each(function(){c._selectedRecordIdsBeforeLoad.push(c._getKeyValueOfRecord(b(this).data("record")))})},_restoreSelectionList:function(){var c=this;if(!c.options.selecting){return}var d=0;for(var f=0;f<c._$tableRows.length;++f){var e=c._getKeyValueOfRecord(c._$tableRows[f].data("record"));if(b.inArray(e,c._selectedRecordIdsBeforeLoad)>-1){c._selectRows(c._$tableRows[f]);++d}}if(c._selectedRecordIdsBeforeLoad.length>0&&c._selectedRecordIdsBeforeLoad.length!==d){c._onSelectionChanged()}c._selectedRecordIdsBeforeLoad=[];c._refreshSelectAllCheckboxState()},_getSelectedRows:function(){return this._$tableBody.find(">tr.jtable-row-selected")},_makeRowSelectable:function(d){var e=this;if(e.options.selectOnRowClick){d.click(function(){e._invertRowSelection(d)})}if(e.options.selectingCheckboxes){var f=b("<td></td>").addClass("jtable-selecting-column");var c=b('<input type="checkbox" />').appendTo(f);if(!e.options.selectOnRowClick){c.click(function(){e._invertRowSelection(d)})}d.append(f)}},_invertRowSelection:function(c){if(c.hasClass("jtable-row-selected")){this._deselectRows(c)}else{if(this._shiftKeyDown){var f=this._findRowIndex(c);var d=this._findFirstSelectedRowIndexBeforeIndex(f)+1;if(d>0&&d<f){this._selectRows(this._$tableBody.find("tr").slice(d,f+1))}else{var e=this._findFirstSelectedRowIndexAfterIndex(f)-1;if(e>f){this._selectRows(this._$tableBody.find("tr").slice(f,e+1))}else{this._selectRows(c)}}}else{this._selectRows(c)}}this._onSelectionChanged()},_findFirstSelectedRowIndexBeforeIndex:function(d){for(var c=d-1;c>=0;--c){if(this._$tableRows[c].hasClass("jtable-row-selected")){return c}}return -1},_findFirstSelectedRowIndexAfterIndex:function(d){for(var c=d+1;c<this._$tableRows.length;++c){if(this._$tableRows[c].hasClass("jtable-row-selected")){return c}}return -1},_selectRows:function(c){if(!this.options.multiselect){this._deselectRows(this._getSelectedRows())}c.addClass("jtable-row-selected");this._jqueryuiThemeAddClass(c,"ui-state-highlight");if(this.options.selectingCheckboxes){c.find(">td.jtable-selecting-column >input").prop("checked",true)}this._refreshSelectAllCheckboxState()},_deselectRows:function(c){c.removeClass("jtable-row-selected ui-state-highlight");if(this.options.selectingCheckboxes){c.find(">td.jtable-selecting-column >input").prop("checked",false)}this._refreshSelectAllCheckboxState()},_refreshSelectAllCheckboxState:function(){if(!this.options.selectingCheckboxes||!this.options.multiselect){return}var d=this._$tableRows.length;var c=this._getSelectedRows().length;if(c===0){this._$selectAllCheckbox.prop("indeterminate",false);this._$selectAllCheckbox.attr("checked",false)}else{if(c===d){this._$selectAllCheckbox.prop("indeterminate",false);this._$selectAllCheckbox.attr("checked",true)}else{this._$selectAllCheckbox.attr("checked",false);this._$selectAllCheckbox.prop("indeterminate",true)}}},_onSelectionChanged:function(){this._trigger("selectionChanged",null,{})}})})(jQuery);(function(b){var a={load:b.hik.jtable.prototype.load,_create:b.hik.jtable.prototype._create,_setOption:b.hik.jtable.prototype._setOption,_createRecordLoadUrl:b.hik.jtable.prototype._createRecordLoadUrl,_addRowToTable:b.hik.jtable.prototype._addRowToTable,_addRow:b.hik.jtable.prototype._addRow,_removeRowsFromTable:b.hik.jtable.prototype._removeRowsFromTable,_onRecordsLoaded:b.hik.jtable.prototype._onRecordsLoaded};b.extend(true,b.hik.jtable.prototype,{options:{paging:false,pageList:"normal",pageSize:10,pageSizes:[10,25,50,100,250,500],pageSizeChangeArea:true,gotoPageArea:"combobox",messages:{pagingInfo:"Showing {0}-{1} of {2}",pageSizeChangeLabel:"Row count",gotoPageLabel:"Go to page"}},_$bottomPanel:null,_$pagingListArea:null,_$pageSizeChangeArea:null,_$pageInfoSpan:null,_$gotoPageArea:null,_$gotoPageInput:null,_totalRecordCount:0,_currentPageNo:1,_create:function(){a._create.apply(this,arguments);if(this.options.paging){this._loadPagingSettings();this._createBottomPanel();this._createPageListArea();this._createGotoPageInput();this._createPageSizeSelection()}},_loadPagingSettings:function(){if(!this.options.saveUserPreferences){return}var c=this._getCookie("page-size");if(c){this.options.pageSize=this._normalizeNumber(c,1,1000000,this.options.pageSize)}},_createBottomPanel:function(){var d=this;d._$bottomPanel=b("<div />").addClass("jtable-bottom-panel").insertAfter(d._$table);var e=b("<div />").addClass("jtable-left-area").appendTo(d._$bottomPanel);var c=b("<div />").addClass("jtable-right-area").appendTo(d._$bottomPanel);if(d.options.bootstrap3){d._$bottomPanel.addClass("clearfix");e.addClass("pull-left");c.addClass("pull-right")}else{d._jqueryuiThemeAddClass(d._$bottomPanel,"ui-state-default")}},_createPageListArea:function(){var c=this;if(c.options.bootstrap3){c._$pagingListArea=b("<ul></ul>").addClass("jtable-page-list pagination").appendTo(c._$bottomPanel.find(".jtable-left-area"))}else{c._$pagingListArea=b("<span></span>").addClass("jtable-page-list").appendTo(c._$bottomPanel.find(".jtable-left-area"))}c._$pageInfoSpan=b("<span></span>").addClass("jtable-page-info").appendTo(c._$bottomPanel.find(".jtable-right-area"))},_createPageSizeSelection:function(){var c=this;if(!c.options.pageSizeChangeArea){return}if(c._findIndexInArray(c.options.pageSize,c.options.pageSizes)<0){c.options.pageSizes.push(parseInt(c.options.pageSize));c.options.pageSizes.sort(function(g,f){return g-f})}c._$pageSizeChangeArea=b("<span></span>").addClass("jtable-page-size-change").appendTo(c._$bottomPanel.find(".jtable-left-area"));c._$pageSizeChangeArea.append("<span>"+c.options.messages.pageSizeChangeLabel+": </span>");var e=b("<select></select>").appendTo(c._$pageSizeChangeArea);if(c.options.bootstrap3){e.addClass("form-control")}for(var d=0;d<c.options.pageSizes.length;d++){e.append('<option value="'+c.options.pageSizes[d]+'">'+c.options.pageSizes[d]+"</option>")}e.val(c.options.pageSize);e.change(function(){c._changePageSize(parseInt(b(this).val()))})},_createGotoPageInput:function(){var c=this;if(!c.options.gotoPageArea||c.options.gotoPageArea==="none"){return}this._$gotoPageArea=b("<span></span>").addClass("jtable-goto-page").appendTo(c._$bottomPanel.find(".jtable-left-area"));this._$gotoPageArea.append("<span>"+c.options.messages.gotoPageLabel+": </span>");if(c.options.gotoPageArea==="combobox"){c._$gotoPageInput=b("<select></select>").appendTo(this._$gotoPageArea).data("pageCount",1).change(function(){c._changePage(parseInt(b(this).val()))});if(c.options.bootstrap3){c._$gotoPageInput.addClass("form-control")}c._$gotoPageInput.append('<option value="1">1</option>')}else{c._$gotoPageInput=b('<input type="text" maxlength="10" value="'+c._currentPageNo+'" />').appendTo(this._$gotoPageArea).keypress(function(d){if(d.which===13){d.preventDefault();c._changePage(parseInt(c._$gotoPageInput.val()))}else{if(d.which===43){d.preventDefault();c._changePage(parseInt(c._$gotoPageInput.val())+1)}else{if(d.which===45){d.preventDefault();c._changePage(parseInt(c._$gotoPageInput.val())-1)}else{var e=((47<d.keyCode&&d.keyCode<58&&d.shiftKey===false&&d.altKey===false)||(d.keyCode===8)||(d.keyCode===9));if(!e){d.preventDefault()}}}}})}},_refreshGotoPageInput:function(){if(!this.options.gotoPageArea||this.options.gotoPageArea==="none"){return}if(this._totalRecordCount<=0){this._$gotoPageArea.hide()}else{this._$gotoPageArea.show()}if(this.options.gotoPageArea==="combobox"){var f=this._$gotoPageInput.data("pageCount");var c=this._calculatePageCount();if(f!==c){this._$gotoPageInput.empty();var d=1;if(c>10000){d=100}else{if(c>5000){d=10}else{if(c>2000){d=5}else{if(c>1000){d=2}}}}for(var e=d;e<=c;e+=d){this._$gotoPageInput.append('<option value="'+e+'">'+e+"</option>")}this._$gotoPageInput.data("pageCount",c)}}this._$gotoPageInput.val(this._currentPageNo)},load:function(){this._currentPageNo=1;a.load.apply(this,arguments)},_setOption:function(c,d){a._setOption.apply(this,arguments);if(c==="pageSize"){this._changePageSize(parseInt(d))}},_changePageSize:function(c){if(c===this.options.pageSize){return}this.options.pageSize=c;var d=this._calculatePageCount();if(this._currentPageNo>d){this._currentPageNo=d}if(this._currentPageNo<=0){this._currentPageNo=1}var f=this._$bottomPanel.find(".jtable-page-size-change select");if(f.length>0){if(parseInt(f.val())!==c){var e=f.find("option[value="+c+"]");if(e.length>0){f.val(c)}}}this._savePagingSettings();this._reloadTable()},_savePagingSettings:function(){if(!this.options.saveUserPreferences){return}this._setCookie("page-size",this.options.pageSize)},_createRecordLoadUrl:function(){var c=a._createRecordLoadUrl.apply(this,arguments);c=this._addPagingInfoToUrl(c,this._currentPageNo);return c},_addRowToTable:function(e,d,c){if(c&&this.options.paging){this._reloadTable();return}a._addRowToTable.apply(this,arguments)},_addRow:function(c,d){if(d&&d.isNewRow&&this.options.paging){this._reloadTable();return}a._addRow.apply(this,arguments)},_removeRowsFromTable:function(c,d){a._removeRowsFromTable.apply(this,arguments);if(this.options.paging){if(this._$tableRows.length<=0&&this._currentPageNo>1){--this._currentPageNo}this._reloadTable()}},_onRecordsLoaded:function(c){if(this.options.paging){this._totalRecordCount=c.TotalRecordCount;this._createPagingList();this._createPagingInfo();this._refreshGotoPageInput()}a._onRecordsLoaded.apply(this,arguments)},_addPagingInfoToUrl:function(e,c){if(!this.options.paging){return e}var d=(c-1)*this.options.pageSize;var f=this.options.pageSize;return(e+(e.indexOf("?")<0?"?":"&")+"jtStartIndex="+d+"&jtPageSize="+f)},_createPagingList:function(){if(this.options.pageSize<=0){return}this._$pagingListArea.empty();if(this._totalRecordCount<=0){return}var c=this._calculatePageCount();this._createFirstAndPreviousPageButtons();if(this.options.pageList==="normal"){this._createPageNumberButtons(this._calculatePageNumbers(c))}this._createLastAndNextPageButtons(c);this._bindClickEventsToPageNumberButtons()},_createFirstAndPreviousPageButtons:function(){var c=this;if(c.options.bootstrap3){var e=b("<li></li>").html('<a href="#">&laquo;</a>')}else{var e=b("<span></span>").html("&lt;&lt;")}e.addClass("jtable-page-number-first").data("pageNumber",1).appendTo(c._$pagingListArea);if(c.options.bootstrap3){var d=b("<li></li>").html('<a href="#">&lsaquo;</a>')}else{var d=b("<span></span>").html("&lt;")}d.addClass("jtable-page-number-previous").data("pageNumber",c._currentPageNo-1).appendTo(c._$pagingListArea);if(!c.options.bootstrap3){c._jqueryuiThemeAddClass(e,"ui-button ui-state-default","ui-state-hover");c._jqueryuiThemeAddClass(d,"ui-button ui-state-default","ui-state-hover")}if(c._currentPageNo<=1){e.addClass("jtable-page-number-disabled");d.addClass("jtable-page-number-disabled");if(!c.options.bootstrap3){c._jqueryuiThemeAddClass(e,"ui-state-disabled");c._jqueryuiThemeAddClass(d,"ui-state-disabled")}else{e.addClass("disabled");d.addClass("disabled")}}},_createLastAndNextPageButtons:function(f){var e=this;if(e.options.bootstrap3){var c=b("<li></li>").html('<a href="#">&rsaquo;</a>')}else{var c=b("<span></span>").html("&gt;")}c.addClass("jtable-page-number-next").data("pageNumber",this._currentPageNo+1).appendTo(e._$pagingListArea);if(e.options.bootstrap3){var d=b("<li></li>").html('<a href="#">&raquo;</a>')}else{var d=b("<span></span>").html("&gt;&gt;")}d.addClass("jtable-page-number-last").data("pageNumber",f).appendTo(e._$pagingListArea);if(!e.options.bootstrap3){e._jqueryuiThemeAddClass(c,"ui-button ui-state-default","ui-state-hover");e._jqueryuiThemeAddClass(d,"ui-button ui-state-default","ui-state-hover")}if(this._currentPageNo>=f){c.addClass("jtable-page-number-disabled");d.addClass("jtable-page-number-disabled");if(!e.options.bootstrap3){e._jqueryuiThemeAddClass(c,"ui-state-disabled");e._jqueryuiThemeAddClass(d,"ui-state-disabled")}else{c.addClass("disabled");d.addClass("disabled")}}},_createPageNumberButtons:function(c){var e=this;var d=0;for(var f=0;f<c.length;f++){if((c[f]-d)>1){if(e.options.bootstrap3){var g=b("<li></li>").html('<a href="#">&hellip;</a>')}else{var g=b("<span></span>").html("...")}g.addClass("jtable-page-number-space").appendTo(e._$pagingListArea)}e._createPageNumberButton(c[f]);d=c[f]}},_createPageNumberButton:function(d){var e=this;if(e.options.bootstrap3){var c=b("<li></li>").html('<a href="#">'+d+"</a>")}else{var c=b("<span></span>").html(d)}c.addClass("jtable-page-number").data("pageNumber",d).appendTo(e._$pagingListArea);if(!e.options.bootstrap3){e._jqueryuiThemeAddClass(c,"ui-button ui-state-default","ui-state-hover")}if(e._currentPageNo===d){c.addClass("jtable-page-number-active jtable-page-number-disabled");if(!e.options.bootstrap3){e._jqueryuiThemeAddClass(c,"ui-state-active")}else{c.addClass("active").html('<a href="#">'+d+' <span class="sr-only">(current)</span></a>')}}},_calculatePageCount:function(){var c=Math.floor(this._totalRecordCount/this.options.pageSize);if(this._totalRecordCount%this.options.pageSize!==0){++c}return c},_calculatePageNumbers:function(e){if(e<=4){var c=[];for(var f=1;f<=e;++f){c.push(f)}return c}else{var d=[1,2,e-1,e];var h=this._normalizeNumber(this._currentPageNo-1,1,e,1);var g=this._normalizeNumber(this._currentPageNo+1,1,e,1);this._insertToArrayIfDoesNotExists(d,h);this._insertToArrayIfDoesNotExists(d,this._currentPageNo);this._insertToArrayIfDoesNotExists(d,g);d.sort(function(j,i){return j-i});return d}},_createPagingInfo:function(){if(this._totalRecordCount<=0){this._$pageInfoSpan.empty();return}var e=(this._currentPageNo-1)*this.options.pageSize+1;var d=this._currentPageNo*this.options.pageSize;d=this._normalizeNumber(d,e,this._totalRecordCount,0);if(d>=e){var c=this._formatString(this.options.messages.pagingInfo,e,d,this._totalRecordCount);this._$pageInfoSpan.html(c)}},_bindClickEventsToPageNumberButtons:function(){var c=this;c._$pagingListArea.find(".jtable-page-number,.jtable-page-number-previous,.jtable-page-number-next,.jtable-page-number-first,.jtable-page-number-last").not(".jtable-page-number-disabled").click(function(d){d.preventDefault();c._changePage(b(this).data("pageNumber"))})},_changePage:function(c){c=this._normalizeNumber(c,1,this._calculatePageCount(),1);if(c===this._currentPageNo){this._refreshGotoPageInput();return}this._currentPageNo=c;this._reloadTable()}})})(jQuery);(function(b){var a={_initializeFields:b.hik.jtable.prototype._initializeFields,_normalizeFieldOptions:b.hik.jtable.prototype._normalizeFieldOptions,_createHeaderCellForField:b.hik.jtable.prototype._createHeaderCellForField,_createRecordLoadUrl:b.hik.jtable.prototype._createRecordLoadUrl};b.extend(true,b.hik.jtable.prototype,{options:{sorting:false,multiSorting:false,defaultSorting:""},_lastSorting:null,_initializeFields:function(){a._initializeFields.apply(this,arguments);this._lastSorting=[];if(this.options.sorting){this._buildDefaultSortingArray()}},_normalizeFieldOptions:function(d,c){a._normalizeFieldOptions.apply(this,arguments);c.sorting=(c.sorting!==false)},_createHeaderCellForField:function(e,d){var c=a._createHeaderCellForField.apply(this,arguments);if(this.options.sorting&&d.sorting){this._makeColumnSortable(c,e)}return c},_createRecordLoadUrl:function(){var c=a._createRecordLoadUrl.apply(this,arguments);c=this._addSortingInfoToUrl(c);return c},_buildDefaultSortingArray:function(){var c=this;b.each(c.options.defaultSorting.split(","),function(d,e){b.each(c.options.fields,function(h,g){if(g.sorting){var f=e.indexOf(h);if(f>-1){if(e.toUpperCase().indexOf(" DESC",f)>-1){c._lastSorting.push({fieldName:h,sortOrder:"DESC"})}else{c._lastSorting.push({fieldName:h,sortOrder:"ASC"})}}}})})},_makeColumnSortable:function(e,f){var d=this;e.addClass("jtable-column-header-sortable").click(function(g){g.preventDefault();if(!d.options.multiSorting||!g.ctrlKey){d._lastSorting=[]}d._sortTableByColumn(e)});var c=b("<span />").addClass("jtable-sortable-icon").appendTo(e.find(".jtable-column-header-container"));if(d.options.bootstrap3){c.addClass("glyphicon glyphicon-sort pull-right")}b.each(this._lastSorting,function(h,g){if(g.fieldName===f){if(g.sortOrder==="DESC"){e.addClass("jtable-column-header-sorted-desc")}else{e.addClass("jtable-column-header-sorted-asc")}if(d.options.bootstrap3){e.find(".jtable-sortable-icon").removeClass("glyphicon-sort").addClass(g.sortOrder==="DESC"?"glyphicon-sort-by-alphabet":"glyphicon-sort-by-alphabet-alt")}}})},_sortTableByColumn:function(d){if(this._lastSorting.length===0){d.siblings().removeClass("jtable-column-header-sorted-asc jtable-column-header-sorted-desc").find(".jtable-sortable-icon").removeClass("glyphicon-sort-by-alphabet glyphicon-sort-by-alphabet-alt").addClass("glyphicon-sort")}for(var c=0;c<this._lastSorting.length;c++){if(this._lastSorting[c].fieldName===d.data("fieldName")){this._lastSorting.splice(c--,1)}}if(d.hasClass("jtable-column-header-sorted-asc")){d.removeClass("jtable-column-header-sorted-asc").addClass("jtable-column-header-sorted-desc");d.find(".jtable-sortable-icon").removeClass("glyphicon-sort glyphicon-sort-by-alphabet").addClass("glyphicon-sort-by-alphabet-alt");this._lastSorting.push({fieldName:d.data("fieldName"),sortOrder:"DESC"})}else{d.removeClass("jtable-column-header-sorted-desc").addClass("jtable-column-header-sorted-asc");d.find(".jtable-sortable-icon").removeClass("glyphicon-sort glyphicon-sort-by-alphabet-alt").addClass("glyphicon-sort-by-alphabet");this._lastSorting.push({fieldName:d.data("fieldName"),sortOrder:"ASC"})}this._reloadTable()},_addSortingInfoToUrl:function(c){if(!this.options.sorting||this._lastSorting.length===0){return c}var d=[];b.each(this._lastSorting,function(e,f){d.push(f.fieldName+" "+f.sortOrder)});return(c+(c.indexOf("?")<0?"?":"&")+"jtSorting="+d.join(","))}})})(jQuery);(function(b){var a={_create:b.hik.jtable.prototype._create,_normalizeFieldOptions:b.hik.jtable.prototype._normalizeFieldOptions,_createHeaderCellForField:b.hik.jtable.prototype._createHeaderCellForField,_createCellForRecordField:b.hik.jtable.prototype._createCellForRecordField};b.extend(true,b.hik.jtable.prototype,{options:{tableId:undefined,columnResizable:true,columnSelectable:true},_$columnSelectionDiv:null,_$columnResizeBar:null,_cookieKeyPrefix:null,_currentResizeArgs:null,_create:function(){a._create.apply(this,arguments);this._createColumnResizeBar();this._createColumnSelection();if(this.options.saveUserPreferences){this._loadColumnSettings()}this._normalizeColumnWidths()},_normalizeFieldOptions:function(d,c){a._normalizeFieldOptions.apply(this,arguments);if(this.options.columnResizable){c.columnResizable=(c.columnResizable!=false)}if(!c.visibility){c.visibility="visible"}},_createHeaderCellForField:function(e,d){var c=a._createHeaderCellForField.apply(this,arguments);if(this.options.columnResizable&&d.columnResizable&&(e!==this._columnList[this._columnList.length-1])){this._makeColumnResizable(c)}if(d.visibility==="hidden"){c.hide()}return c},_createCellForRecordField:function(c,f){var e=a._createCellForRecordField.apply(this,arguments);var d=this.options.fields[f];if(d.visibility==="hidden"){e.hide()}return e},changeColumnVisibility:function(d,c){this._changeColumnVisibilityInternal(d,c);this._normalizeColumnWidths();if(this.options.saveUserPreferences){this._saveColumnSettings()}},_changeColumnVisibilityInternal:function(d,c){var e=this._columnList.indexOf(d);if(e<0){this._logWarn('Column "'+d+'" does not exist in fields!');return}if(["visible","hidden","fixed"].indexOf(c)<0){this._logWarn('Visibility value is not valid: "'+c+'"! Options are: visible, hidden, fixed.');return}var g=this.options.fields[d];if(g.visibility===c){return}var f=this._firstDataColumnOffset+e+1;if(g.visibility!=="hidden"&&c==="hidden"){this._$table.find(">thead >tr >th:nth-child("+f+"),>tbody >tr >td:nth-child("+f+")").hide()}else{if(g.visibility==="hidden"&&c!=="hidden"){this._$table.find(">thead >tr >th:nth-child("+f+"),>tbody >tr >td:nth-child("+f+")").show().css("display","table-cell")}}g.visibility=c},_createColumnSelection:function(){var c=this;this._$columnSelectionDiv=b("<div />").addClass("jtable-column-selection-container").appendTo(c._$mainContainer);this._$table.children("thead").bind("contextmenu",function(j){if(!c.options.columnSelectable){return}j.preventDefault();b("<div />").addClass("jtable-contextmenu-overlay").click(function(){b(this).remove();c._$columnSelectionDiv.hide()}).bind("contextmenu",function(){return false}).appendTo(document.body);c._fillColumnSelection();var f=c._$mainContainer.offset();var i=j.pageY-f.top;var d=j.pageX-f.left;var h=100;var g=c._$mainContainer.width();if((g>h)&&(d>(g-h))){d=g-h}c._$columnSelectionDiv.css({left:d,top:i,"min-width":h+"px"}).show()})},_fillColumnSelection:function(){var f=this;var e=b("<ul></ul>").addClass("jtable-column-select-list");for(var g=0;g<this._columnList.length;g++){var d=this._columnList[g];var k=this.options.fields[d];var j=b("<li></li>").appendTo(e);var c=b('<label for="'+d+'"></label>').append(b("<span>"+(k.title||d)+"</span>")).appendTo(j);var h=b('<input type="checkbox" name="'+d+'">').prependTo(c).click(function(){var m=b(this);var l=m.attr("name");var i=f.options.fields[l];if(i.visibility==="fixed"){return}f.changeColumnVisibility(l,m.is(":checked")?"visible":"hidden")});if(k.visibility!=="hidden"){h.attr("checked","checked")}if(k.visibility==="fixed"){h.attr("disabled","disabled")}}this._$columnSelectionDiv.html(e)},_createColumnResizeBar:function(){this._$columnResizeBar=b("<div />").addClass("jtable-column-resize-bar").appendTo(this._$mainContainer).hide()},_makeColumnResizable:function(d){var c=this;b("<div />").addClass("jtable-column-resize-handler").appendTo(d.find(".jtable-column-header-container")).mousedown(function(g){g.preventDefault();g.stopPropagation();var e=c._$mainContainer.offset();var f=d.nextAll("th.jtable-column-header:visible:first");if(!f.length){return}var i=10;c._currentResizeArgs={currentColumnStartWidth:d.outerWidth(),minWidth:i,maxWidth:d.outerWidth()+f.outerWidth()-i,mouseStartX:g.pageX,minResizeX:function(){return this.mouseStartX-(this.currentColumnStartWidth-this.minWidth)},maxResizeX:function(){return this.mouseStartX+(this.maxWidth-this.currentColumnStartWidth)}};var j=function(k){if(!c._currentResizeArgs){return}var l=c._normalizeNumber(k.pageX,c._currentResizeArgs.minResizeX(),c._currentResizeArgs.maxResizeX());c._$columnResizeBar.css("left",(l-e.left)+"px")};var h=function(n){if(!c._currentResizeArgs){return}b(document).unbind("mousemove",j);b(document).unbind("mouseup",h);c._$columnResizeBar.hide();var l=n.pageX-c._currentResizeArgs.mouseStartX;var o=c._normalizeNumber(c._currentResizeArgs.currentColumnStartWidth+l,c._currentResizeArgs.minWidth,c._currentResizeArgs.maxWidth);var m=f.outerWidth()+(c._currentResizeArgs.currentColumnStartWidth-o);var k=d.data("width-in-percent")/c._currentResizeArgs.currentColumnStartWidth;d.data("width-in-percent",o*k);f.data("width-in-percent",m*k);d.css("width",d.data("width-in-percent")+"%");f.css("width",f.data("width-in-percent")+"%");c._normalizeColumnWidths();c._currentResizeArgs=null;if(c.options.saveUserPreferences){c._saveColumnSettings()}};c._$columnResizeBar.show().css({top:(d.offset().top-e.top)+"px",left:(g.pageX-e.left)+"px",height:(c._$table.outerHeight())+"px"});b(document).bind("mousemove",j);b(document).bind("mouseup",h)})},_normalizeColumnWidths:function(){var g=this._$table.find(">thead th.jtable-command-column-header").data("width-in-percent",1).css("width","1%");var c=this._$table.find(">thead th.jtable-column-header");var e=0;c.each(function(){var h=b(this);if(h.is(":visible")){e+=h.outerWidth()}});var f={};var d=100-g.length;c.each(function(){var i=b(this);if(i.is(":visible")){var j=i.data("fieldName");var h=i.outerWidth()*d/e;f[j]=h}});c.each(function(){var h=b(this);if(h.is(":visible")){var i=h.data("fieldName");h.data("width-in-percent",f[i]).css("width",f[i]+"%")}})},_saveColumnSettings:function(){var c=this;var d="";this._$table.find(">thead >tr >th.jtable-column-header").each(function(){var h=b(this);var i=h.data("fieldName");var g=h.data("width-in-percent");var e=c.options.fields[i].visibility;var f=i+"="+e+";"+g;d=d+f+"|"});this._setCookie("column-settings",d.substr(0,d.length-1))},_loadColumnSettings:function(){var e=this;var c=this._getCookie("column-settings");if(!c){return}var f={};b.each(c.split("|"),function(i,h){var k=h.split("=");var j=k[0];var g=k[1].split(";");f[j]={columnVisibility:g[0],columnWidth:g[1]}});var d=this._$table.find(">thead >tr >th.jtable-column-header");d.each(function(){var g=b(this);var i=g.data("fieldName");var h=e.options.fields[i];if(f[i]){if(h.visibility!="fixed"){e._changeColumnVisibilityInternal(i,f[i].columnVisibility)}g.data("width-in-percent",f[i].columnWidth).css("width",f[i].columnWidth+"%")}})}})})(jQuery);(function(b){var a={_removeRowsFromTable:b.hik.jtable.prototype._removeRowsFromTable};b.extend(true,b.hik.jtable.prototype,{options:{openChildAsAccordion:false},openChildTable:function(d,c,f){var e=this;if(c.jqueryuiTheme===undefined){c.jqueryuiTheme=e.options.jqueryuiTheme}c.showCloseButton=(c.showCloseButton!==false);if(c.showCloseButton&&!c.closeRequested){c.closeRequested=function(){e.closeChildTable(d)}}if(e.options.openChildAsAccordion){d.siblings(".jtable-data-row").each(function(){e.closeChildTable(b(this))})}e.closeChildTable(d,function(){var h=e.getChildRow(d).children("td").empty();var g=b("<div />").addClass("jtable-child-table-container").appendTo(h);h.data("childTable",g);g.jtable(c);e.openChildRow(d);g.hide().slideDown("fast",function(){if(f){f({childTable:g})}})})},closeChildTable:function(c,f){var e=this;var g=this.getChildRow(c).children("td");var d=g.data("childTable");if(!d){if(f){f()}return}g.data("childTable",null);d.slideUp("fast",function(){d.jtable("destroy");d.remove();e.closeChildRow(c);if(f){f()}})},isChildRowOpen:function(c){return(this.getChildRow(c).is(":visible"))},getChildRow:function(c){return c.data("childRow")||this._createChildRow(c)},openChildRow:function(c){var d=this.getChildRow(c);if(!d.is(":visible")){d.show()}return d},closeChildRow:function(c){var d=this.getChildRow(c);if(d.is(":visible")){d.hide()}},_removeRowsFromTable:function(d,e){var c=this;if(e==="deleted"){d.each(function(){var f=b(this);var g=f.data("childRow");if(g){c.closeChildTable(f);g.remove()}})}a._removeRowsFromTable.apply(this,arguments)},_createChildRow:function(d){var c=this._$table.find("thead th").length;var e=b("<tr></tr>").addClass("jtable-child-row").append('<td colspan="'+c+'"></td>');d.after(e);d.data("childRow",e);e.hide();return e}})})(jQuery);
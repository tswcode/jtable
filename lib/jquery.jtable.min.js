(function(b){var a=new Date();var c;b(window).on("beforeunload",function(){c=true});b(window).on("unload",function(){c=false});b.widget("hik.jtable",{options:{actions:{},fields:{},animationsEnabled:true,defaultDateFormat:"yy-mm-dd",dialogShowEffect:"fade",dialogHideEffect:"fade",showCloseButton:false,loadingAnimationDelay:500,saveUserPreferences:true,jqueryuiTheme:false,bootstrap3:true,bs3PanelClass:"panel-info",bs3FormClass:"horizontal",bs3UseFormGroup:true,bs3NavBtnClass:"btn-warning",bs3CancelBtnClass:"btn-default",bs3OkBtnClass:"btn-primary",useMobiScroll:true,msPreset:"datetime",msMinDate:new Date(a.getFullYear(),a.getMonth(),a.getDate()),msMaxDate:new Date(a.getFullYear()+2,a.getMonth(),a.getDate()),msStepMinute:5,msTheme:"android-ics light",msMode:"mixed",msDisplay:"modal",msLang:"de",bs3DPweekStart:0,bs3DPcalendarWeeks:false,bs3DPstartDate:-Infinity,bs3DPendDate:Infinity,bs3DPdaysOfWeekDisabled:[],bs3DPautoclose:false,bs3DPstartView:0,bs3DPminViewMode:0,bs3DPtodayBtn:false,bs3DPtodayHighlight:false,bs3DPclearBtn:false,bs3DPkeyboardNavigation:true,bs3DPlanguage:"en",bs3DPforceParse:true,bs3DPinputs:null,bs3DPbeforeShowDay:b.noop,bs3DPorientation:"auto",ajaxSettings:{type:"POST",dataType:"json"},toolbar:{hoverAnimation:true,hoverAnimationDuration:60,hoverAnimationEasing:undefined,items:[]},closeRequested:function(d,e){},formCreated:function(d,e){},formSubmitting:function(d,e){},formClosed:function(d,e){},loadingRecords:function(d,e){},recordsLoaded:function(d,e){},rowInserted:function(d,e){},rowsRemoved:function(d,e){},messages:{serverCommunicationError:"An error occured while communicating to the server.",errorDetails:"Error details",loadingMessage:"Loading records...",noDataAvailable:"No data available!",areYouSure:"Are you sure?",save:"Save",saving:"Saving",cancel:"Cancel",error:"Error",close:"Close",cannotLoadOptionsFor:"Can not load options for field {0}"}},_$mainContainer:null,_$titleDiv:null,_$toolbarDiv:null,_$table:null,_$tableBody:null,_$tableRows:null,_$busyDiv:null,_$busyMessageDiv:null,_$errorDialogDiv:null,_columnList:null,_fieldList:null,_keyField:null,_firstDataColumnOffset:0,_lastPostData:null,_cache:null,_create:function(){this._normalizeFieldsOptions();this._initializeFields();this._createFieldAndColumnList();this._createMainContainer();this._createTableTitle();this._createToolBar();this._createTable();this._createBusyPanel();this._createErrorDialogDiv();this._addNoDataRow();this._cookieKeyPrefix=this._generateCookieKeyPrefix()},_normalizeFieldsOptions:function(){var d=this;b.each(d.options.fields,function(f,e){d._normalizeFieldOptions(f,e)})},_normalizeFieldOptions:function(g,f){if(typeof f.listClass!=="undefined"){f.listClass=""}if(typeof f.inputClass!=="undefined"){f.inputClass=""}if(f.dependsOn&&b.type(f.dependsOn)==="string"){var d=f.dependsOn.split(",");f.dependsOn=[];for(var e=0;e<d.length;e++){f.dependsOn.push(b.trim(d[e]))}}},_initializeFields:function(){this._lastPostData={};this._$tableRows=[];this._columnList=[];this._fieldList=[];this._cache=[]},_createFieldAndColumnList:function(){var d=this;b.each(d.options.fields,function(e,f){d._fieldList.push(e);if(f.key===true){d._keyField=e}if(f.list!==false&&f.type!=="hidden"){d._columnList.push(e)}})},_createMainContainer:function(){var d=this;this._$mainContainer=b("<div />").addClass("jtable-main-container").appendTo(this.element);this._jqueryuiThemeAddClass(this._$mainContainer,"ui-widget");this._bootstrap3AddClass(this._$mainContainer,"panel "+d.options.bs3PanelClass)},_createTableTitle:function(){var e=this;if(!e.options.title){return}var f=b("<div />").addClass("jtable-title").appendTo(e._$mainContainer);e._jqueryuiThemeAddClass(f,"ui-widget-header");e._bootstrap3AddClass(f,"panel-heading");var h=b("<div />").addClass("jtable-title-text").appendTo(f).append(b('<span class="jtable-title-text-container"/>').html(e.options.title));e._bootstrap3AddClass(h,"panel-title");if(e.options.showCloseButton){var g=b("<span />").html(e.options.messages.close);if(e.options.bootstrap3){g.addClass("glyphicon glyphicon-remove").html("")}var d=b("<div></div>").addClass("jtable-toolbar pull-right").appendTo(h);b("<button></button>").addClass("jtable-command-button jtable-close-button navbar-btn btn "+e.options.bs3NavBtnClass).attr("title",e.options.messages.close).append(g).appendTo(d).click(function(i){i.preventDefault();i.stopPropagation();e._onCloseRequested()})}e._$titleDiv=f},_createTable:function(){this._$table=b("<table></table>").addClass("jtable").appendTo(this._$mainContainer);if(this.options.tableId){this._$table.attr("id",this.options.tableId)}this._jqueryuiThemeAddClass(this._$table,"ui-widget-content");this._bootstrap3AddClass(this._$table,"table table-striped table-bordered table-hover table-condensed");this._createTableHead();this._createTableBody()},_createTableHead:function(){var d=b("<thead></thead>").appendTo(this._$table);this._addRowToTableHead(d)},_addRowToTableHead:function(d){var e=b("<tr></tr>").appendTo(d);this._addColumnsToHeaderRow(e)},_addColumnsToHeaderRow:function(f){for(var d=0;d<this._columnList.length;d++){var g=this._columnList[d];var e=this._createHeaderCellForField(g,this.options.fields[g]);e.appendTo(f)}},_createHeaderCellForField:function(h,g){g.width=g.width||"10%";var d=b("<span />").addClass("jtable-column-header-text").html(g.title);var f=b("<div />").addClass("jtable-column-header-container").append(d);var e=b("<th></th>").addClass("jtable-column-header").addClass(g.listClass).css("width",g.width).data("fieldName",h).append(f);this._jqueryuiThemeAddClass(e,"ui-state-default");return e},_createEmptyCommandHeader:function(){var d=b("<th></th>").addClass("jtable-command-column-header").css("width","1%");this._jqueryuiThemeAddClass(d,"ui-state-default");return d},_createTableBody:function(){this._$tableBody=b("<tbody></tbody>").appendTo(this._$table)},_createBusyPanel:function(){this._$busyMessageDiv=b("<div />").addClass("jtable-busy-message").prependTo(this._$mainContainer);this._$busyDiv=b("<div />").addClass("jtable-busy-panel-background").prependTo(this._$mainContainer);this._jqueryuiThemeAddClass(this._$busyMessageDiv,"ui-widget-header");this._hideBusy()},_createErrorDialogDiv:function(){var d=this;if(d.options.bootstrap3){d._$errorDialogDiv=b('<div class="modal fade" tabindex="-1" role="dialog" aria-hidden="true" style="z-index:9999;"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">'+d.options.messages.error+'</h4></div><div class="modal-body"></div><div class="modal-footer"><button type="button" class="btn '+d.options.bs3CancelBtnClass+'" data-dismiss="modal">'+d.options.messages.close+"</button></div></div></div></div>").appendTo(d._$mainContainer)}else{d._$errorDialogDiv=b("<div></div>").appendTo(d._$mainContainer);d._$errorDialogDiv.dialog({autoOpen:false,show:d.options.dialogShowEffect,hide:d.options.dialogHideEffect,modal:true,title:d.options.messages.error,buttons:[{text:d.options.messages.close,click:function(){d._$errorDialogDiv.dialog("close")}}]})}},load:function(d,e){this._lastPostData=d;this._reloadTable(e)},reload:function(d){this._reloadTable(d)},getRowByKey:function(e){for(var d=0;d<this._$tableRows.length;d++){if(e===this._getKeyValueOfRecord(this._$tableRows[d].data("record"))){return this._$tableRows[d]}}return null},destroy:function(){this.element.empty();b.Widget.prototype.destroy.call(this)},_setOption:function(d,e){},_reloadTable:function(g){var d=this;var f=function(i){d._hideBusy();if(i.Result!=="OK"){d._showError(i.Message);return}d._removeAllRows("reloading");d._addRecordsToTable(i.Records);d._onRecordsLoaded(i);if(g){g()}};d._showBusy(d.options.messages.loadingMessage,d.options.loadingAnimationDelay);d._onLoadingRecords();if(b.isFunction(d.options.actions.listAction)){var h=d.options.actions.listAction(d._lastPostData,d._createJtParamsForLoading());if(d._isDeferredObject(h)){h.done(function(i){f(i)}).fail(function(i){console.info(i);d._showError(d.options.messages.serverCommunicationError,i)}).always(function(){d._hideBusy()})}else{f(h)}}else{var e=d._createRecordLoadUrl();d._ajax({url:e,data:d._lastPostData,success:function(i){f(i)},error:function(i){d._hideBusy();d._showError(d.options.messages.serverCommunicationError,i)}})}},_createRecordLoadUrl:function(){return this.options.actions.listAction},_createJtParamsForLoading:function(){return{}},_createRowFromRecord:function(d){var e=b("<tr></tr>").addClass("jtable-data-row").attr("data-record-key",this._getKeyValueOfRecord(d)).data("record",d);this._addCellsToRowUsingRecord(e);return e},_addCellsToRowUsingRecord:function(d){var e=d.data("record");for(var f=0;f<this._columnList.length;f++){this._createCellForRecordField(e,this._columnList[f]).appendTo(d)}},_createCellForRecordField:function(d,e){return b("<td></td>").addClass(this.options.fields[e].listClass).append((this._getDisplayTextForRecordField(d,e)))},_addRecordsToTable:function(e){var d=this;b.each(e,function(g,f){d._addRow(d._createRowFromRecord(f))});d._refreshRowStyles()},_addRowToTable:function(g,f,d,h){var e={index:this._normalizeNumber(f,0,this._$tableRows.length,this._$tableRows.length)};if(d===true){e.isNewRow=true}if(h===false){e.animationsEnabled=false}this._addRow(g,e)},_addRow:function(d,e){e=b.extend({index:this._$tableRows.length,isNewRow:false,animationsEnabled:true},e);if(this._$tableRows.length<=0){this._removeNoDataRow()}e.index=this._normalizeNumber(e.index,0,this._$tableRows.length,this._$tableRows.length);if(e.index===this._$tableRows.length){this._$tableBody.append(d);this._$tableRows.push(d)}else{if(e.index===0){this._$tableBody.prepend(d);this._$tableRows.unshift(d)}else{this._$tableRows[e.index-1].after(d);this._$tableRows.splice(e.index,0,d)}}this._onRowInserted(d,e.isNewRow);if(e.isNewRow){this._refreshRowStyles();if(this.options.animationsEnabled&&e.animationsEnabled){this._showNewRowAnimation(d)}}},_showNewRowAnimation:function(e){var d="jtable-row-created";if(this.options.jqueryuiTheme){d=d+" ui-state-highlight"}e.addClass(d,"slow","",function(){e.removeClass(d,5000)})},_removeRowsFromTable:function(e,f){var d=this;if(e.length<=0){return}e.addClass("jtable-row-removed").remove();e.each(function(){var g=d._findRowIndex(b(this));if(g>=0){d._$tableRows.splice(g,1)}});d._onRowsRemoved(e,f);if(d._$tableRows.length===0){d._addNoDataRow()}d._refreshRowStyles()},_findRowIndex:function(d){return this._findIndexInArray(d,this._$tableRows,function(f,e){return f.data("record")===e.data("record")})},_removeAllRows:function(e){if(this._$tableRows.length<=0){return}var d=this._$tableBody.find("tr.jtable-data-row");this._$tableBody.empty();this._$tableRows=[];this._onRowsRemoved(d,e);this._addNoDataRow()},_addNoDataRow:function(){if(this._$tableBody.find(">tr.jtable-no-data-row").length>0){return}var e=b("<tr></tr>").addClass("jtable-no-data-row").appendTo(this._$tableBody);var d=this._$table.find("thead th").length;b("<td></td>").attr("colspan",d).html(this.options.messages.noDataAvailable).appendTo(e)},_removeNoDataRow:function(){this._$tableBody.find(".jtable-no-data-row").remove()},_refreshRowStyles:function(){for(var d=0;d<this._$tableRows.length;d++){if(d%2===0){this._$tableRows[d].addClass("jtable-row-even")}else{this._$tableRows[d].removeClass("jtable-row-even")}}},_getDisplayTextForRecordField:function(d,h){var g=this.options.fields[h];var f=d[h];if(g.display){return g.display({record:d})}if(g.type==="date"){return this._getDisplayTextForDateRecordField(g,f)}else{if(g.type==="checkbox"){return this._getCheckBoxTextForFieldByValue(h,f)}else{if(g.options){var e=this._getOptionsForField(h,{record:d,value:f,source:"list",dependedValues:this._createDependedValuesUsingRecord(d,g.dependsOn)});return this._findOptionByValue(e,f).DisplayText}else{return f}}}},_createDependedValuesUsingRecord:function(d,f){if(!f){return{}}var e={};for(var g=0;g<f.length;g++){e[f[g]]=d[f[g]]}return e},_findOptionByValue:function(d,f){for(var e=0;e<d.length;e++){if(d[e].Value===f){return d[e]}}return{}},_getDisplayTextForDateRecordField:function(g,f){if(!f){return""}var d=g.displayFormat||this.options.defaultDateFormat;var e=this._parseDate(f);return b.mobiscroll.formatDate(d,e)},_getOptionsForField:function(j,g){var h=this.options.fields[j];var d=h.options;if(b.isFunction(d)){g=b.extend(true,{_cacheCleared:false,dependedValues:{},clearCache:function(){this._cacheCleared=true}},g);d=d(g)}var e;if(typeof d==="string"){var i="options_"+j+"_"+d;if(g._cacheCleared||(!this._cache[i])){this._cache[i]=this._buildOptionsFromArray(this._downloadOptions(j,d));this._sortFieldOptions(this._cache[i],h.optionsSorting)}else{if(typeof g.value!=="undefined"){var f=this._findOptionByValue(this._cache[i],g.value);if(typeof f.DisplayText!=="undefined"){this._cache[i]=this._buildOptionsFromArray(this._downloadOptions(j,d));this._sortFieldOptions(this._cache[i],h.optionsSorting)}}}e=this._cache[i]}else{if(jQuery.isArray(d)){e=this._buildOptionsFromArray(d);this._sortFieldOptions(e,h.optionsSorting)}else{e=this._buildOptionsArrayFromObject(d);this._sortFieldOptions(e,h.optionsSorting)}}return e},_downloadOptions:function(g,f){var d=this;var e=[];d._ajax({url:f,async:false,success:function(h){if(h.Result!=="OK"){d._showError(h.Message);return}e=h.Options},error:function(h){var i=d._formatString(d.options.messages.cannotLoadOptionsFor,g);d._showError(i)}});return e},_sortFieldOptions:function(d,g){if((!d)||(!d.length)||(!g)){return}var e;if(g.indexOf("value")===0){e=function(h){return h.Value}}else{e=function(h){return h.DisplayText}}var f;if(b.type(e(d[0]))==="string"){f=function(i,h){return e(i).localeCompare(e(h))}}else{f=function(i,h){return e(i)-e(h)}}if(g.indexOf("desc")>0){d.sort(function(i,h){return f(h,i)})}else{d.sort(function(i,h){return f(i,h)})}},_buildOptionsArrayFromObject:function(d){var e=[];b.each(d,function(f,g){e.push({Value:f,DisplayText:g})});return e},_buildOptionsFromArray:function(d){var f=[];for(var e=0;e<d.length;e++){if(b.isPlainObject(d[e])){f.push(d[e])}else{f.push({Value:d[e],DisplayText:d[e]})}}return f},_parseDate:function(d){if(d.indexOf("Date")>=0){return new Date(parseInt(d.substr(6),10))}else{if(d.length===10){return new Date(parseInt(d.substr(0,4),10),parseInt(d.substr(5,2),10)-1,parseInt(d.substr(8,2),10))}else{if(d.length===19){return new Date(parseInt(d.substr(0,4),10),parseInt(d.substr(5,2),10)-1,parseInt(d.substr(8,2,10)),parseInt(d.substr(11,2),10),parseInt(d.substr(14,2),10),parseInt(d.substr(17,2),10))}else{if(d.length===16){return new Date(parseInt(d.substr(6,4),10),parseInt(d.substr(3,2),10)-1,parseInt(d.substr(0,2,10)),parseInt(d.substr(11,2),10),parseInt(d.substr(14,2),10))}else{if(d.length===29){return new Date(parseInt(d.substr(0,4),10),parseInt(d.substr(5,2),10)-1,parseInt(d.substr(8,2,10)),parseInt(d.substr(11,2),10),parseInt(d.substr(14,2),10),parseInt(d.substr(17,2),10))}else{this._logWarn("Given date is not properly formatted: "+d);return"format error!"}}}}}},_createToolBar:function(){var d=this;d._$toolbarDiv=b("<div />").addClass("jtable-toolbar pull-right").appendTo(d.options.bootstrap3?d._$titleDiv.find(".panel-title"):d._$titleDiv);for(var e=0;e<d.options.toolbar.items.length;e++){d._addToolBarItem(d.options.toolbar.items[e])}},_addToolBarItem:function(f){var e=this;if((typeof f==="undefined")||(typeof f.text==="undefined"&&typeof f.icon==="undefined")){this._logWarn("Can not add tool bar item since it is not valid!");this._logWarn(f);return null}if(!e.options.bootstrap3){var i=b("<span></span>").addClass("jtable-toolbar-item").appendTo(this._$toolbarDiv);this._jqueryuiThemeAddClass(i,"ui-widget ui-state-default ui-corner-all","ui-state-hover");if(f.cssClass){i.addClass(f.cssClass)}}else{var i=b("<button></button>").addClass("jtable-toolbar-item navbar-btn btn "+e.options.bs3NavBtnClass).appendTo(this._$toolbarDiv)}if(f.tooltip){i.attr("title",f.tooltip)}if(f.icon){var d=b('<span class="jtable-toolbar-item-icon glyphicon"></span>').appendTo(i);if(f.icon===true){}else{if(typeof f.icon==="string"){d.css("background",'url("'+f.icon+'")')}}if(e.options.bootstrap3&&f.cssClass){d.addClass(f.cssClass)}}if(f.text&&!e.options.bootstrap3){b('<span class=""></span>').html(f.text).addClass("jtable-toolbar-item-text").appendTo(i)}else{i.attr("title",f.text)}if(f.click){i.click(function(){f.click()})}var h=undefined;var g=undefined;if(this.options.toolbar.hoverAnimation){h=this.options.toolbar.hoverAnimationDuration;g=this.options.toolbar.hoverAnimationEasing}i.hover(function(){i.addClass("jtable-toolbar-item-hover",h,g)},function(){i.removeClass("jtable-toolbar-item-hover",h,g)});return i},_showError:function(e,f){var d=this;if(typeof f!=="undefined"){console.info(f);e+="<br/><br/>";e+="<h5>"+d.options.messages.errorDetails+"</h5>";e+='<dl class="dl-horizontal"><dt>'+f[0].status+"</dt><dd>"+f[0].statusText+"</dd><dt>Response</dt><dd>"+f[0].responseText.replace(/\<br ?\/?\>/g,"")+"</dd></dl>"}if(this.options.bootstrap3){this._$errorDialogDiv.find(".modal-body").html(e);this._$errorDialogDiv.modal("show").data("bs.modal").$backdrop.css("z-index","9998")}else{this._$errorDialogDiv.html(e).dialog("open")}},_setBusyTimer:null,_showBusy:function(g,e){var d=this;d._$busyDiv.width(d._$mainContainer.width()).height(d._$mainContainer.height()).addClass("jtable-busy-panel-background-invisible").show();var f=function(){d._$busyDiv.removeClass("jtable-busy-panel-background-invisible");d._$busyMessageDiv.html(g).show()};if(e){if(d._setBusyTimer){return}d._setBusyTimer=setTimeout(f,e)}else{f()}},_hideBusy:function(){clearTimeout(this._setBusyTimer);this._setBusyTimer=null;this._$busyDiv.hide();this._$busyMessageDiv.html("").hide()},_isBusy:function(){return this._$busyMessageDiv.is(":visible")},_jqueryuiThemeAddClass:function(d,f,e){if(!this.options.jqueryuiTheme){return}d.addClass(f);if(e){d.hover(function(){d.addClass(e)},function(){d.removeClass(e)})}},_bootstrap3AddClass:function(d,f,e){if(!this.options.bootstrap3){return}d.addClass(f);if(e){d.hover(function(){d.addClass(e)},function(){d.removeClass(e)})}},_performAjaxCall:function(f,d,g,h,e){this._ajax({url:f,data:d,async:g,success:h,error:e})},_unAuthorizedRequestHandler:function(){if(this.options.unAuthorizedRequestRedirectUrl){location.href=this.options.unAuthorizedRequestRedirectUrl}else{location.reload(true)}},_ajax:function(e){var d=this;var f={statusCode:{401:function(){d._unAuthorizedRequestHandler()}}};f=b.extend(f,this.options.ajaxSettings,e);f.success=function(g){if(g&&g.UnAuthorizedRequest===true){d._unAuthorizedRequestHandler()}if(e.success){e.success(g)}};f.error=function(g,i,h){if(c){g.abort();return}if(e.error){e.error(arguments)}};f.complete=function(){if(e.complete){e.complete()}};b.ajax(f)},_getKeyValueOfRecord:function(d){return d[this._keyField]},_setCookie:function(e,f){e=this._cookieKeyPrefix+e;var d=new Date();d.setDate(d.getDate()+30);document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(f)+"; expires="+d.toUTCString()},_getCookie:function(f){f=this._cookieKeyPrefix+f;var d=document.cookie.split("; ");for(var e=0;e<d.length;e++){if(!d[e]){continue}var g=d[e].split("=");if(g.length!==2){continue}if(decodeURIComponent(g[0])===f){return decodeURIComponent(g[1]||"")}}return null},_generateCookieKeyPrefix:function(){var d=function(h){var j=0;if(h.length===0){return j}for(var f=0;f<h.length;f++){var g=h.charCodeAt(f);j=((j<<5)-j)+g;j=j&j}return j};var e="";if(this.options.tableId){e=e+this.options.tableId+"#"}e=e+this._columnList.join("$")+"#c"+this._$table.find("thead th").length;return"jtable#"+d(e)},_onLoadingRecords:function(){this._trigger("loadingRecords",null,{})},_onRecordsLoaded:function(d){this._trigger("recordsLoaded",null,{records:d.Records,serverResponse:d})},_onRowInserted:function(e,d){this._trigger("rowInserted",null,{row:e,record:e.data("record"),isNewRow:d})},_onRowsRemoved:function(d,e){this._trigger("rowsRemoved",null,{rows:d,reason:e})},_onCloseRequested:function(){this._trigger("closeRequested",null,{})}})}(jQuery));(function(a){a.extend(true,a.hik.jtable.prototype,{_getPropertyOfObject:function(e,c){if(c.indexOf(".")<0){return e[c]}else{var b=c.substring(0,c.indexOf("."));var d=c.substring(c.indexOf(".")+1);return this._getPropertyOfObject(e[b],d)}},_setPropertyOfObject:function(f,d,c){if(d.indexOf(".")<0){f[d]=c}else{var b=d.substring(0,d.indexOf("."));var e=d.substring(d.indexOf(".")+1);this._setPropertyOfObject(f[b],e,c)}},_insertToArrayIfDoesNotExists:function(c,b){if(a.inArray(b,c)<0){c.push(b)}},_findIndexInArray:function(d,e,c){if(!c){c=function(g,f){return g===f}}for(var b=0;b<e.length;b++){if(c(d,e[b])){return b}}return -1},_normalizeNumber:function(e,d,b,c){if(typeof e==="undefined"||e===null||isNaN(e)){return c}if(e<d){return d}if(e>b){return b}return e},_formatString:function(){if(arguments.length===0){return null}var d=arguments[0];for(var b=1;b<arguments.length;b++){var c="{"+(b-1)+"}";d=d.replace(c,arguments[b])}return d},_isDeferredObject:function(b){return b.then&&b.done&&b.fail},_logDebug:function(b){if(!window.console){return}console.log("jTable DEBUG: "+b)},_logInfo:function(b){if(!window.console){return}console.log("jTable INFO: "+b)},_logWarn:function(b){if(!window.console){return}console.log("jTable WARNING: "+b)},_logError:function(b){if(!window.console){return}console.log("jTable ERROR: "+b)}});if(!Array.prototype.indexOf){Array.prototype.indexOf=function(c){var b=this.length;var d=Number(arguments[1])||0;d=(d<0)?Math.ceil(d):Math.floor(d);if(d<0){d+=b}for(;d<b;d++){if(d in this&&this[d]===c){return d}}return -1}}})(jQuery);(function(a){a.extend(true,a.hik.jtable.prototype,{_submitFormUsingAjax:function(c,d,e,b){this._ajax({url:c,data:d,success:e,error:b})},_createInputLabelForRecordField:function(c){if(this.options.bootstrap3){var b=a("<label />").attr("for","Edit-"+c).addClass("control-label col-lg-4").html(this.options.fields[c].inputTitle||this.options.fields[c].title);if(this.options.fields[c].bs3LabelClass!==""&&typeof(this.options.fields[c].bs3LabelClass)!=="undefined"){b.addClass(this.options.fields[c].bs3LabelClass)}return b}else{return a("<div />").addClass("jtable-input-label").html(this.options.fields[c].inputTitle||this.options.fields[c].title)}},_createInputForRecordField:function(l){var k=this;var j=l.fieldName,i=l.value,d=l.record,e=l.formType,c=l.form;var h=k.options.fields[j];if(typeof i===undefined||i===null){i=h.defaultValue}if(h.input){var g=a(h.input({value:i,record:d,formType:e,form:c}));if(!g.attr("id")){g.attr("id","Edit-"+j)}var f=a("<div />").addClass("jtable-input jtable-custom-input").append(g);if(k.options.bs3UseFormGroup){f.addClass("form-group")}return f}var b=null;if(h.type==="date"){b=k._createDateInputForField(h,j,i)}else{if(h.type==="textarea"){b=k._createTextAreaForField(h,j,i)}else{if(h.type==="password"){b=k._createPasswordInputForField(h,j,i)}else{if(h.type==="checkbox"){b=k._createCheckboxForField(h,j,i)}else{if(h.options){if(h.type==="radiobutton"){b=k._createRadioButtonListForField(h,j,i,d,e)}else{b=k._createDropDownListForField(h,j,i,d,e,c)}}else{b=k._createTextInputForField(h,j,i)}}}}}if(this.options.bootstrap3){if(k.options.fields[j].bs3InputColClass!==""&&typeof(k.options.fields[j].bs3InputColClass)!=="undefined"){return a("<div />").addClass(k.options.fields[j].bs3InputColClass).append(b.find("input"))}else{return b.addClass("col-lg-8")}}else{return b}},_createInputForHidden:function(c,b){if(typeof b==="undefined"){b=""}return a('<input type="hidden" name="'+c+'" id="Edit-'+c+'"></input>').val(b)},_createDateInputForField:function(e,g,d){var c=this;var f=a('<input id="Edit-'+g+'" type="text" name="'+g+'"></input>');if(typeof e.inputClass!=="undefined"){f.addClass(e.inputClass)}if(typeof d!=="undefined"){f.val(d)}var b=e.displayFormat||c.options.defaultDateFormat;if(c.options.bootstrap3){f.addClass("form-control");if(c.options.useMobiScroll){f.scroller({preset:e.msPreset||c.options.msPreset,minDate:e.msMinDate||c.options.msMinDate,maxDate:e.msMaxDate||c.options.msMaxDate,stepMinute:e.msMaxDate||c.options.msStepMinute,theme:e.msTheme||c.options.msTheme,mode:e.msMode||c.options.msMode,display:e.msDisplay||c.options.msDisplay,lang:e.msLang||c.options.msLang})}else{f.addClass("datepicker");f.datepicker({format:b,weekStart:c.options.bs3DPweekStart,calendarWeeks:c.options.bs3DPcalendarWeeks,startDate:c.options.bs3DPstartDate,endDate:c.options.bs3DPendDate,daysOfWeekDisabled:c.options.bs3DPdaysOfWeekDisabled,autoclose:c.options.bs3DPautoclose,startView:c.options.bs3DPstartView,minViewMode:c.options.bs3DPminViewMode,todayBtn:c.options.bs3DPtodayBtn,todayHighlight:c.options.bs3DPtodayHighlight,clearBtn:c.options.bs3DPclearBtn,keyboardNavigation:c.options.bs3DPkeyboardNavigation,language:c.options.bs3DPlanguage,forceParse:c.options.bs3DPforceParse,inputs:c.options.bs3DPinputs,beforeShowDay:c.options.bs3DPbeforeShowDay,orientation:c.options.bs3DPorientation})}}else{f.datepicker({dateFormat:b})}return a("<div />").addClass("jtable-input jtable-date-input").append(f)},_createTextAreaForField:function(e,f,d){var b=this;var c=a('<textarea id="Edit-'+f+'" name="'+f+'"></textarea>');if(typeof e.inputClass!=="undefined"){c.addClass(e.inputClass)}if(typeof d!=="undefined"){c.val(d)}if(b.options.bootstrap3){c.addClass("form-control")}return a("<div />").addClass("jtable-input jtable-textarea-input").append(c)},_createTextInputForField:function(e,g,d){var b=this;var f=a('<input id="Edit-'+g+'" type="text" name="'+g+'"></input>');if(typeof e.inputClass!=="undefined"){f.addClass(e.inputClass)}if(b.options.bootstrap3){f.addClass("form-control")}if(typeof d!=="undefined"){f.val(d)}var c=a("<div />").addClass("jtable-input jtable-text-input").append(f);return c},_createPasswordInputForField:function(d,f,c){var b=this;var e=a('<input id="Edit-'+f+'" type="password" name="'+f+'"></input>');if(typeof d.inputClass!=="undefined"){e.addClass(d.inputClass)}if(b.options.bootstrap3){e.addClass("form-control")}if(typeof c!=="undefined"){e.val(c)}return a("<div />").addClass("jtable-input jtable-password-input").append(e)},_createCheckboxForField:function(f,h,g){var j=this;if(typeof g==="undefined"){g=j._getCheckBoxPropertiesForFieldByState(h,false).Value}var i=a("<div />").addClass("jtable-input jtable-checkbox-input");if(j.options.bootstrap3){var c=a('<div class="checkbox" />').appendTo(i)}var d=a('<input id="Edit-'+h+'" type="checkbox" name="'+h+'" />');if(j.options.bootstrap3){d.appendTo(c)}else{d.appendTo(i)}if(typeof f.inputClass!=="undefined"){d.addClass(f.inputClass)}if(typeof g!=="undefined"){d.val(g)}var e=a("<span>"+(f.formText||j._getCheckBoxTextForFieldByValue(h,g))+"</span>");if(j.options.bootstrap3){e.appendTo(c)}else{e.appendTo(i)}if(j._getIsCheckBoxSelectedForFieldByValue(h,g)){d.attr("checked","checked")}var b=function(){var k=j._getCheckBoxPropertiesForFieldByState(h,d.is(":checked"));d.attr("value",k.Value);e.html(f.formText||k.DisplayText)};d.click(function(){b()});if(f.setOnTextClick!==false){e.addClass("jtable-option-text-clickable").click(function(){if(d.is(":checked")){d.attr("checked",false)}else{d.attr("checked",true)}b()})}return i},_createDropDownListForField:function(f,h,g,e,b,c){var j=this;var i=a("<div />").addClass("jtable-input jtable-dropdown-input");var d=a('<select id="Edit-'+h+'" name="'+h+'"></select>').appendTo(i);if(typeof f.inputClass!=="undefined"){d.addClass(f.inputClass)}if(j.options.bootstrap3){d.addClass("form-control")}var k=this._getOptionsForField(h,{record:e,source:b,form:c,dependedValues:this._createDependedValuesUsingForm(c,f.dependsOn)});this._fillDropDownListWithOptions(d,k,g);return i},_fillDropDownListWithOptions:function(c,b,e){c.empty();for(var d=0;d<b.length;d++){a("<option"+(""+b[d].Value===""+e?' selected="selected"':"")+">"+b[d].DisplayText+"</option>").val(b[d].Value).appendTo(c)}},_createDependedValuesUsingForm:function(c,e){if(!e){return{}}var d={};for(var f=0;f<e.length;f++){var g=e[f];var b=c.find("select[name="+g+"]");if(b.length<=0){continue}d[g]=b.val()}return d},_createRadioButtonListForField:function(h,i,g,c,f){var d=this;var b=a("<div />").addClass("jtable-input jtable-radiobuttonlist-input");var e=d._getOptionsForField(i,{record:c,source:f});a.each(e,function(l,m){var o=a('<div class=""></div>').addClass("jtable-radio-input").appendTo(b);if(d.options.bootstrap3){var k=a('<div class="radio" />').appendTo(o)}var j=a('<input type="radio" id="Edit-'+i+"-"+l+'" cname="'+i+'"'+((m.Value===(g+""))?' checked="true"':"")+" />").val(m.Value);if(d.options.bootstrap3){j.appendTo(k)}else{j.appendTo(o)}if(typeof h.inputClass!=="undefined"){j.addClass(h.inputClass)}var n=a("<span></span>").html(m.DisplayText);if(d.options.bootstrap3){n.appendTo(k)}else{n.appendTo(o)}if(h.setOnTextClick!==false){n.addClass("jtable-option-text-clickable").click(function(){if(!j.is(":checked")){j.attr("checked",true)}})}});return b},_getCheckBoxTextForFieldByValue:function(c,b){return this.options.fields[c].values[b]},_getIsCheckBoxSelectedForFieldByValue:function(c,b){return(this._createCheckBoxStateArrayForFieldWithCaching(c)[1].Value.toString()===b.toString())},_getCheckBoxPropertiesForFieldByState:function(c,b){return this._createCheckBoxStateArrayForFieldWithCaching(c)[(b?1:0)]},_createCheckBoxStateArrayForFieldWithCaching:function(c){var b="checkbox_"+c;if(!this._cache[b]){this._cache[b]=this._createCheckBoxStateArrayForField(c)}return this._cache[b]},_createCheckBoxStateArrayForField:function(d){var c=[];var b=0;a.each(this.options.fields[d].values,function(e,f){if(b++<2){c.push({Value:e,DisplayText:f})}});return c},_makeCascadeDropDowns:function(d,b,e){var c=this;d.find("select").each(function(){var f=a(this);var h=f.attr("name");if(!h){return}var g=c.options.fields[h];if(!g.dependsOn){return}a.each(g.dependsOn,function(i,k){var j=d.find("select[name="+k+"]");j.change(function(){var m={record:b,source:e,form:d,dependedValues:{}};m.dependedValues=c._createDependedValuesUsingForm(d,g.dependsOn);var l=c._getOptionsForField(h,m);c._fillDropDownListWithOptions(f,l,undefined);f.change()})})})},_updateRecordValuesFromForm:function(d,n){for(var c=0;c<this._fieldList.length;c++){var l=this._fieldList[c];var h=this.options.fields[l];if(h.edit===false){continue}var k=n.find('[name="'+l+'"]');if(k.length<=0){continue}if(h.type==="date"){var j=k.val();if(j){var m=h.displayFormat||this.options.defaultDateFormat;try{var b=a.mobiscroll.formatDate(m,j);d[l]="/Date("+b.getTime()+")/"}catch(g){this._logWarn("Date format is incorrect for field "+l+": "+j);d[l]=undefined}}else{this._logDebug("Date is empty for "+l);d[l]=undefined}}else{if(h.options&&h.type==="radiobutton"){var f=k.filter(":checked");if(f.length){d[l]=f.val()}else{d[l]=undefined}}else{d[l]=k.val()}}}},_setEnabledOfDialogButton:function(d,b,c){if(!d){return}if(b!==false){d.removeAttr("disabled").removeClass("ui-state-disabled")}else{d.attr("disabled","disabled").addClass("ui-state-disabled")}if(c){if(d.has("span").length){d.find("span").text(c)}else{d.text(c)}}}})})(jQuery);(function(b){var a={_create:b.hik.jtable.prototype._create};b.extend(true,b.hik.jtable.prototype,{options:{recordAdded:function(c,d){},messages:{addNewRecord:"Add new record"}},_$addRecordDiv:null,_create:function(){a._create.apply(this,arguments);if(!this.options.actions.createAction){return}this._createAddRecordDialogDiv()},_createAddRecordDialogDiv:function(){var c=this;c._$addRecordDiv=b("<div />").appendTo(c._$mainContainer);if(c.options.bootstrap3){var e="createModal"+Math.floor((Math.random()*10000)+1);var d=b('<button id="AddRecordDialogSaveButton" type="button" class="btn '+c.options.bs3OkBtnClass+'">'+c.options.messages.save+"</button>");c._$addRecordDiv.addClass("modal fade").attr("id",e).attr("role","dialog").attr("tabindex","-1").attr("aria-hidden","true").attr("aria-labelledby",e+"Title");b("<div />").addClass("modal-dialog").append(b("<div />").addClass("modal-content").append(b("<div />").addClass("modal-header").append('<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title" id="'+e+'Title">'+c.options.messages.addNewRecord+"</h4>")).append(b("<div />").addClass("modal-body")).append(b("<div />").addClass("modal-footer").append('<button type="button" class="btn '+c.options.bs3CancelBtnClass+'" data-dismiss="modal">'+c.options.messages.cancel+"</button>").append(d))).appendTo(c._$addRecordDiv);c._$addRecordDiv.on("hidden.bs.modal",function(){var f=c._$addRecordDiv.find("form").first();var g=b("#AddRecordDialogSaveButton");c._trigger("formClosed",null,{form:f,formType:"create"});c._setEnabledOfDialogButton(g,true,c.options.messages.save);f.remove()});d.on("click",function(){var f=c._$addRecordDiv.find("form");if(c._trigger("formSubmitting",null,{form:f,formType:"create"})!==false){c._setEnabledOfDialogButton(d,false,c.options.messages.saving);c._saveAddRecordForm(f,d)}})}else{c._$addRecordDiv.dialog({autoOpen:false,show:c.options.dialogShowEffect,hide:c.options.dialogHideEffect,width:"auto",minWidth:"300",modal:true,title:c.options.messages.addNewRecord,buttons:[{text:c.options.messages.cancel,click:function(){c._$addRecordDiv.dialog("close")}},{id:"AddRecordDialogSaveButton",text:c.options.messages.save,click:function(){var g=b("#AddRecordDialogSaveButton");var f=c._$addRecordDiv.find("form");if(c._trigger("formSubmitting",null,{form:f,formType:"create"})!==false){c._setEnabledOfDialogButton(g,false,c.options.messages.saving);c._saveAddRecordForm(f,g)}}}],close:function(){var f=c._$addRecordDiv.find("form").first();var g=b("#AddRecordDialogSaveButton");c._trigger("formClosed",null,{form:f,formType:"create"});c._setEnabledOfDialogButton(g,true,c.options.messages.save);f.remove()}})}if(c.options.addRecordButton){c.options.addRecordButton.click(function(f){f.preventDefault();c._showAddRecordForm()})}else{c._addToolBarItem({icon:true,cssClass:"jtable-toolbar-item-add-record glyphicon-plus",text:c.options.messages.addNewRecord,click:function(){c._showAddRecordForm()}})}},_onSaveClickedOnCreateForm:function(){var d=this;var e=d._$addRecordDiv.parent().find("#AddRecordDialogSaveButton");var c=d._$addRecordDiv.find("form");if(d._trigger("formSubmitting",null,{form:c,formType:"create"})!==false){d._setEnabledOfDialogButton(e,false,d.options.messages.saving);d._saveAddRecordForm(c,e)}},showCreateForm:function(){this._showAddRecordForm()},addRecord:function(d){var c=this;d=b.extend({clientOnly:false,animationsEnabled:c.options.animationsEnabled,success:function(){},error:function(){}},d);if(!d.record){c._logWarn("options parameter in addRecord method must contain a record property.");return}if(d.clientOnly){c._addRow(c._createRowFromRecord(d.record),{isNewRow:true,animationsEnabled:d.animationsEnabled});d.success();return}var e=function(g){if(g.Result!=="OK"){c._showError(g.Message);d.error(g);return}if(!g.Record){c._logError("Server must return the created Record object.");d.error(g);return}c._onRecordAdded(g);c._addRow(c._createRowFromRecord(g.Record),{isNewRow:true,animationsEnabled:d.animationsEnabled});d.success(g)};if(!d.url&&b.isFunction(c.options.actions.createAction)){var f=c.options.actions.createAction(b.param(d.record));if(c._isDeferredObject(f)){f.done(function(g){e(g)}).fail(function(g){c._showError(c.options.messages.serverCommunicationError,g);d.error()})}else{e(f)}}else{c._submitFormUsingAjax(d.url||c.options.actions.createAction,b.param(d.record),function(g){e(g)},function(g){c._showError(c.options.messages.serverCommunicationError,g);d.error()})}},_showAddRecordForm:function(){var e=this;var c=b('<form id="jtable-create-form" class="jtable-dialog-form jtable-create-form" action="'+e.options.actions.createAction+'" method="POST" role="form"></form>');if(e.options.bootstrap3){if(e.options.bs3FormClass==="inline"){c.addClass("form-inline")}else{if(e.options.bs3FormClass==="horizontal"){c.addClass("form-horizontal")}}}for(var f=0;f<e._fieldList.length;f++){var h=e._fieldList[f];var g=e.options.fields[h];if(g.key===true&&g.create!==true){continue}if(g.create===false){continue}if(g.type==="hidden"){c.append(e._createInputForHidden(h,g.defaultValue));continue}var d=b("<div />").addClass("jtable-input-field-container").appendTo(c);if(e.options.bootstrap3&&e.options.bs3UseFormGroup){d.addClass("form-group")}d.append(e._createInputLabelForRecordField(h));d.append(e._createInputForRecordField({fieldName:h,formType:"create",form:c}))}e._makeCascadeDropDowns(c,undefined,"create");c.submit(function(){e._onSaveClickedOnCreateForm();return false});if(e.options.bootstrap3){e._$addRecordDiv.find(".modal-body").append(c);e._$addRecordDiv.modal("show")}else{e._$addRecordDiv.append(c).dialog("open")}e._trigger("formCreated",null,{form:c,formType:"create"})},_saveAddRecordForm:function(c,e){var d=this;var f=function(h){if(h.Result!=="OK"){d._showError(h.Message);d._setEnabledOfDialogButton(e,true,d.options.messages.save);return}if(!h.Record){d._logError("Server must return the created Record object.");d._setEnabledOfDialogButton(e,true,d.options.messages.save);return}d._onRecordAdded(h);d._addRow(d._createRowFromRecord(h.Record),{isNewRow:true});if(d.options.bootstrap3){d._$addRecordDiv.modal("hide")}else{d._$addRecordDiv.dialog("close")}};c.data("submitting",true);if(b.isFunction(d.options.actions.createAction)){var g=d.options.actions.createAction(c.serialize());if(d._isDeferredObject(g)){g.done(function(h){f(h)}).fail(function(h){d._showError(d.options.messages.serverCommunicationError,h);d._setEnabledOfDialogButton(e,true,d.options.messages.save)})}else{f(g)}}else{d._submitFormUsingAjax(d.options.actions.createAction,c.serialize(),function(h){f(h)},function(h){d._showError(d.options.messages.serverCommunicationError,h);d._setEnabledOfDialogButton(e,true,d.options.messages.save)})}},_onRecordAdded:function(c){this._trigger("recordAdded",null,{record:c.Record,serverResponse:c})}})})(jQuery);(function(b){var a={_create:b.hik.jtable.prototype._create,_addColumnsToHeaderRow:b.hik.jtable.prototype._addColumnsToHeaderRow,_addCellsToRowUsingRecord:b.hik.jtable.prototype._addCellsToRowUsingRecord};b.extend(true,b.hik.jtable.prototype,{options:{recordUpdated:function(c,d){},rowUpdated:function(c,d){},messages:{editRecord:"Edit Record"}},_$editDiv:null,_$editingRow:null,_create:function(){a._create.apply(this,arguments);if(!this.options.actions.updateAction){return}this._createEditDialogDiv()},_createEditDialogDiv:function(){var c=this;c._$editDiv=b("<div></div>").appendTo(c._$mainContainer);if(c.options.bootstrap3){var e="createModal"+Math.floor((Math.random()*10000)+1);var d=b('<button id="EditDialogSaveButton" type="button" class="btn btn-primary">'+c.options.messages.save+"</button>");c._$editDiv.addClass("modal fade").attr("id",e).attr("role","dialog").attr("tabindex","-1").attr("aria-hidden","true").attr("aria-labelledby",e+"Title");b("<div />").addClass("modal-dialog").append(b("<div />").addClass("modal-content").append(b("<div />").addClass("modal-header").append('<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title" id="'+e+'Title">'+c.options.messages.editRecord+"</h4>")).append(b("<div />").addClass("modal-body").append(c._$editDiv.find("form:first"))).append(b("<div />").addClass("modal-footer").append('<button type="button" class="btn btn-default" data-dismiss="modal">'+c.options.messages.cancel+"</button>").append(d))).appendTo(c._$editDiv);c._$editDiv.on("hidden.bs.modal",function(){var f=c._$editDiv.find("form").first();var g=b("#EditDialogSaveButton");c._trigger("formClosed",null,{form:f,formType:"edit"});c._setEnabledOfDialogButton(g,true,c.options.messages.save);f.remove()});d.on("click",function(){var f=c._$editDiv.find("form");if(c._trigger("formSubmitting",null,{form:f,formType:"edit"})!==false){c._setEnabledOfDialogButton(d,false,c.options.messages.saving);c._saveEditForm(f,d)}})}else{c._$editDiv.dialog({autoOpen:false,show:c.options.dialogShowEffect,hide:c.options.dialogHideEffect,width:"auto",minWidth:"300",modal:true,title:c.options.messages.editRecord,buttons:[{text:c.options.messages.cancel,click:function(){c._$editDiv.dialog("close")}},{id:"EditDialogSaveButton",text:c.options.messages.save,click:function(){if(c._$editingRow.hasClass("jtable-row-removed")){c._$editDiv.dialog("close");return}var g=c._$editDiv.find("#EditDialogSaveButton");var f=c._$editDiv.find("form");if(c._trigger("formSubmitting",null,{form:f,formType:"edit",row:c._$editingRow})!==false){c._setEnabledOfDialogButton(g,false,c.options.messages.saving);c._saveEditForm(f,g)}}}],close:function(){var f=c._$editDiv.find("form:first");var g=b("#EditDialogSaveButton");c._trigger("formClosed",null,{form:f,formType:"edit",row:c._$editingRow});c._setEnabledOfDialogButton(g,true,c.options.messages.save);f.remove()}})}},_onSaveClickedOnEditForm:function(){var d=this;if(d._$editingRow.hasClass("jtable-row-removed")){if(d.options.bootstrap3){d._$editDiv.modal("hide")}else{d._$editDiv.dialog("close")}return}var e=d._$editDiv.parent().find("#EditDialogSaveButton");var c=d._$editDiv.find("form");if(d._trigger("formSubmitting",null,{form:c,formType:"edit",row:d._$editingRow})!==false){d._setEnabledOfDialogButton(e,false,d.options.messages.saving);d._saveEditForm(c,e)}},updateRecord:function(e){var d=this;e=b.extend({clientOnly:false,animationsEnabled:d.options.animationsEnabled,success:function(){},error:function(){}},e);if(!e.record){d._logWarn("options parameter in updateRecord method must contain a record property.");return}var g=d._getKeyValueOfRecord(e.record);if(typeof g==="undefined"||g===null){d._logWarn("options parameter in updateRecord method must contain a record that contains the key field property.");return}var f=d.getRowByKey(g);if(f===null){d._logWarn('Can not found any row by key "'+g+'" on the table. Updating row must be visible on the table.');return}if(e.clientOnly){b.extend(f.data("record"),e.record);d._updateRowTexts(f);d._onRecordUpdated(f,null);if(e.animationsEnabled){d._showUpdateAnimationForRow(f)}e.success();return}var c=function(i){if(i.Result==="OK"){d._showError(i.Message);e.error(i);return}b.extend(f.data("record"),e.record);d._updateRecordValuesFromServerResponse(f.data("record"),i);d._updateRowTexts(f);d._onRecordUpdated(f,i);if(e.animationsEnabled){d._showUpdateAnimationForRow(f)}e.success(i)};if(!e.url&&b.isFunction(d.options.actions.updateAction)){var h=d.options.actions.updateAction(b.param(e.record));if(d._isDeferredObject(h)){h.done(function(i){c(i)}).fail(function(i){d._showError(d.options.messages.serverCommunicationError,i);e.error()})}else{c(h)}}else{d._submitFormUsingAjax(e.url||d.options.actions.updateAction,b.param(e.record),function(i){c(i)},function(i){d._showError(d.options.messages.serverCommunicationError,i);e.error()})}},_addColumnsToHeaderRow:function(c){a._addColumnsToHeaderRow.apply(this,arguments);if(this.options.actions.updateAction!==undefined){c.append(this._createEmptyCommandHeader())}},_addCellsToRowUsingRecord:function(c){var e=this;a._addCellsToRowUsingRecord.apply(this,arguments);if(e.options.actions.updateAction!==undefined){var d=b("<span></span>");if(e.options.bootstrap3){d.addClass("glyphicon glyphicon-pencil")}else{d.html(e.options.messages.editRecord)}var f=b('<button title="'+e.options.messages.editRecord+'"></button>').addClass("jtable-command-button jtable-edit-command-button").append(d).click(function(g){g.preventDefault();g.stopPropagation();e._showEditForm(c)});if(e.options.bootstrap3){f.addClass("btn btn-primary")}b("<td></td>").addClass("jtable-command-column").append(f).appendTo(c)}},_showEditForm:function(h){var m=this;var f=h.data("record");var d=b('<form id="jtable-edit-form" class="jtable-dialog-form jtable-edit-form" action="'+m.options.actions.updateAction+'" method="POST"></form>');if(m.options.bootstrap3){d.addClass("form-horizontal")}for(var e=0;e<m._fieldList.length;e++){var l=m._fieldList[e];var j=m.options.fields[l];var c=f[l];if(j.key===true){if(j.edit!==true){d.append(m._createInputForHidden(l,c));continue}else{d.append(m._createInputForHidden("jtRecordKey",c))}}if(j.edit===false){continue}if(j.type==="hidden"){d.append(m._createInputForHidden(l,c));continue}var g=b('<div class="jtable-input-field-container"></div>').appendTo(d);if(m.options.bootstrap3){g.addClass("form-group")}g.append(m._createInputLabelForRecordField(l));var k=m._getValueForRecordField(f,l);g.append(m._createInputForRecordField({fieldName:l,value:k,record:f,formType:"edit",form:d}))}m._makeCascadeDropDowns(d,f,"edit");d.submit(function(){m._onSaveClickedOnEditForm();return false});m._$editingRow=h;if(m.options.bootstrap3){m._$editDiv.find(".modal-body").empty().append(d);m._$editDiv.modal("show")}else{m._$editDiv.append(d).dialog("open")}m._trigger("formCreated",null,{form:d,formType:"edit",record:f,row:h})},_saveEditForm:function(e,f){var d=this;var c=function(i){if(i.Result!=="OK"){d._showError(i.Message);d._setEnabledOfDialogButton(f,true,d.options.messages.save);return}var h=d._$editingRow.data("record");d._updateRecordValuesFromForm(h,e);d._updateRecordValuesFromServerResponse(h,i);d._updateRowTexts(d._$editingRow);d._$editingRow.attr("data-record-key",d._getKeyValueOfRecord(h));d._onRecordUpdated(d._$editingRow,i);if(d.options.animationsEnabled){d._showUpdateAnimationForRow(d._$editingRow)}if(d.options.bootstrap3){d._$editDiv.modal("hide")}else{d._$editDiv.dialog("close")}};if(b.isFunction(d.options.actions.updateAction)){var g=d.options.actions.updateAction(e.serialize());if(d._isDeferredObject(g)){g.done(function(h){c(h)}).fail(function(h){d._showError(d.options.messages.serverCommunicationError,h);d._setEnabledOfDialogButton(f,true,d.options.messages.save)})}else{c(g)}}else{d._submitFormUsingAjax(d.options.actions.updateAction,e.serialize(),function(h){c(h)},function(h){d._showError(d.options.messages.serverCommunicationError,h);d._setEnabledOfDialogButton(f,true,d.options.messages.save)})}},_updateRecordValuesFromServerResponse:function(c,d){if(!d||!d.Record){return}b.extend(true,c,d.Record)},_getValueForRecordField:function(d,j){var h=this.options.fields[j];var f=d[j];if(typeof f==="undefined"&&j.indexOf(".")!==-1){var g=j.split(".");var c=d;for(var e=0;e<g.length;e++){if(typeof c==="undefined"){break}c=c[g[e]]}f=c}if(h.type==="date"){return this._getDisplayTextForDateRecordField(h,f)}else{return f}},_updateRowTexts:function(g){var d=g.data("record");var c=g.find("td");for(var f=0;f<this._columnList.length;f++){var e=this._getDisplayTextForRecordField(d,this._columnList[f]);if((e!=="")&&(e===0)){e="0"}c.eq(this._firstDataColumnOffset+f).html(e||"")}this._onRowUpdated(g)},_showUpdateAnimationForRow:function(d){var c="jtable-row-updated";if(this.options.jqueryuiTheme){c=c+" ui-state-highlight"}d.stop(true,true).addClass(c,"slow","",function(){d.removeClass(c,5000)})},_onRowUpdated:function(c){this._trigger("rowUpdated",null,{row:c,record:c.data("record")})},_onRecordUpdated:function(c,d){this._trigger("recordUpdated",null,{record:c.data("record"),row:c,serverResponse:d})}})})(jQuery);(function(b){var a={_create:b.hik.jtable.prototype._create,_addColumnsToHeaderRow:b.hik.jtable.prototype._addColumnsToHeaderRow,_addCellsToRowUsingRecord:b.hik.jtable.prototype._addCellsToRowUsingRecord};b.extend(true,b.hik.jtable.prototype,{options:{deleteConfirmation:true,recordDeleted:function(c,d){},messages:{deleteConfirmation:"This record will be deleted. Are you sure?",deleteText:"Delete",deleting:"Deleting",canNotDeletedRecords:"Can not delete {0} of {1} records!",deleteProggress:"Deleting {0} of {1} records, processing..."}},_$deleteRecordDiv:null,_$deletingRow:null,_create:function(){a._create.apply(this,arguments);this._createDeleteDialogDiv()},_createDeleteDialogDiv:function(){var c=this;if(!c.options.actions.deleteAction){return}c._$deleteRecordDiv=b('<div><p><span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span><span class="jtable-delete-confirm-message"></span></p></div>').appendTo(c._$mainContainer);if(c.options.bootstrap3){c._$deleteRecordDiv.find("span.ui-icon").attr("class","glyphicon glyphicon-warning-sign");var e="createModal"+Math.floor((Math.random()*10000)+1);var d=b('<button id="DelRecordDialogSaveButton" type="button" class="btn btn-primary">'+c.options.messages.deleteText+"</button>");c._$deleteRecordDiv.addClass("modal fade").attr("id",e).attr("role","dialog").attr("tabindex","-1").attr("aria-hidden","true").attr("aria-labelledby",e+"Title");b("<div />").addClass("modal-dialog").append(b("<div />").addClass("modal-content").append(b("<div />").addClass("modal-header").append('<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title" id="'+e+'Title">'+c.options.messages.areYouSure+"</h4>")).append(b("<div />").addClass("modal-body").append(c._$deleteRecordDiv.find("p"))).append(b("<div />").addClass("modal-footer").append('<button type="button" class="btn btn-default" data-dismiss="modal">'+c.options.messages.cancel+"</button>").append(d))).appendTo(c._$deleteRecordDiv);c._$deleteRecordDiv.on("hidden.bs.modal",function(){var f=c._$addRecordDiv.find("form").first();var g=b("#DelRecordDialogSaveButton");c._trigger("formClosed",null,{form:f,formType:"create"});c._setEnabledOfDialogButton(g,true,c.options.messages.save);f.remove()});d.on("click",function(){if(c._$deletingRow.hasClass("jtable-row-removed")){c._$deleteRecordDiv.modal("hide");return}var f=b("#DeleteDialogButton");c._setEnabledOfDialogButton(f,false,c.options.messages.deleting);c._deleteRecordFromServer(c._$deletingRow,function(){c._removeRowsFromTableWithAnimation(c._$deletingRow);c._$deleteRecordDiv.modal("hide")},function(g){c._showError(g);c._setEnabledOfDialogButton(f,true,c.options.messages.deleteText)})})}else{c._$deleteRecordDiv.dialog({autoOpen:false,show:c.options.dialogShowEffect,hide:c.options.dialogHideEffect,modal:true,title:c.options.messages.areYouSure,buttons:[{text:c.options.messages.cancel,click:function(){c._$deleteRecordDiv.dialog("close")}},{id:"DeleteDialogButton",text:c.options.messages.deleteText,click:function(){if(c._$deletingRow.hasClass("jtable-row-removed")){c._$deleteRecordDiv.dialog("close");return}var f=c._$deleteRecordDiv.parent().find("#DeleteDialogButton");c._setEnabledOfDialogButton(f,false,c.options.messages.deleting);c._deleteRecordFromServer(c._$deletingRow,function(){c._removeRowsFromTableWithAnimation(c._$deletingRow);c._$deleteRecordDiv.dialog("close")},function(g){c._showError(g);c._setEnabledOfDialogButton(f,true,c.options.messages.deleteText)})}}],close:function(){var f=c._$deleteRecordDiv.parent().find("#DeleteDialogButton");c._setEnabledOfDialogButton(f,true,c.options.messages.deleteText)}})}},deleteRows:function(e){var d=this;if(e.length<=0){d._logWarn("No rows specified to jTable deleteRows method.");return}if(d._isBusy()){d._logWarn("Can not delete rows since jTable is busy!");return}if(e.length===1){d._deleteRecordFromServer(e,function(){d._removeRowsFromTableWithAnimation(e)},function(i){d._showError(i)});return}d._showBusy(d._formatString(d.options.messages.deleteProggress,0,e.length));var c=0;var g=function(){return(c>=e.length)};var f=function(){var i=e.filter(".jtable-row-ready-to-remove");if(i.length<e.length){d._showError(d._formatString(d.options.messages.canNotDeletedRecords,e.length-i.length,e.length))}if(i.length>0){d._removeRowsFromTableWithAnimation(i)}d._hideBusy()};var h=0;e.each(function(){var i=b(this);d._deleteRecordFromServer(i,function(){++h;++c;i.addClass("jtable-row-ready-to-remove");d._showBusy(d._formatString(d.options.messages.deleteProggress,h,e.length));if(g()){f()}},function(){++c;if(g()){f()}})})},deleteRecord:function(d){var c=this;d=b.extend({clientOnly:false,animationsEnabled:c.options.animationsEnabled,url:c.options.actions.deleteAction,success:function(){},error:function(){}},d);if(typeof d.key==="undefined"){c._logWarn("options parameter in deleteRecord method must contain a key property.");return}var e=c.getRowByKey(d.key);if(e===null){c._logWarn("Can not found any row by key: "+d.key);return}if(d.clientOnly){c._removeRowsFromTableWithAnimation(e,d.animationsEnabled);d.success();return}c._deleteRecordFromServer(e,function(f){c._removeRowsFromTableWithAnimation(e,d.animationsEnabled);d.success(f)},function(f){c._showError(f);d.error(f)},d.url)},_addColumnsToHeaderRow:function(c){a._addColumnsToHeaderRow.apply(this,arguments);if(typeof this.options.actions.deleteAction!==undefined){c.append(this._createEmptyCommandHeader())}},_addCellsToRowUsingRecord:function(c){a._addCellsToRowUsingRecord.apply(this,arguments);var e=this;if(typeof e.options.actions.deleteAction!==undefined){var d=b("<span></span>");if(e.options.bootstrap3){d.addClass("glyphicon glyphicon-trash")}else{d.html(e.options.messages.deleteText)}var f=b('<button title="'+e.options.messages.deleteText+'"></button>').addClass("jtable-command-button jtable-delete-command-button").append(d).click(function(g){g.preventDefault();g.stopPropagation();e._deleteButtonClickedForRow(c)});if(e.options.bootstrap3){f.addClass("btn btn-danger")}b("<td></td>").addClass("jtable-command-column").append(f).appendTo(c)}},_deleteButtonClickedForRow:function(c){var d=this;var f;var e=d.options.messages.deleteConfirmation;if(b.isFunction(d.options.deleteConfirmation)){var g={row:c,record:c.data("record"),deleteConfirm:true,deleteConfirmMessage:e,cancel:false,cancelMessage:null};d.options.deleteConfirmation(g);if(g.cancel){if(g.cancelMessage){d._showError(g.cancelMessage)}return}e=g.deleteConfirmMessage;f=g.deleteConfirm}else{f=d.options.deleteConfirmation}if(f!==false){d._$deleteRecordDiv.find(".jtable-delete-confirm-message").html(e);d._showDeleteDialog(c)}else{d._deleteRecordFromServer(c,function(){d._removeRowsFromTableWithAnimation(c)},function(h){d._showError(h)})}},_showDeleteDialog:function(c){var d=this;d._$deletingRow=c;if(d.options.bootstrap3){d._$deleteRecordDiv.modal("show")}else{d._$deleteRecordDiv.dialog("open")}},_deleteRecordFromServer:function(c,j,g,f){var e=this;var h=function(k){if(k.Result!=="OK"){c.data("deleting",false);if(g){g(k.Message)}return}e._trigger("recordDeleted",null,{record:c.data("record"),row:c,serverResponse:k});if(j){j(k)}};if(c.data("deleting")===true){return}c.data("deleting",true);var d={};d[e._keyField]=e._getKeyValueOfRecord(c.data("record"));if(!f&&b.isFunction(e.options.actions.deleteAction)){var i=e.options.actions.deleteAction(d);if(e._isDeferredObject(i)){i.done(function(k){h(k)}).fail(function(k){c.data("deleting",false);if(g){g(e.options.messages.serverCommunicationError,k)}})}else{h(i)}}else{this._ajax({url:(f||e.options.actions.deleteAction),data:d,success:function(k){h(k)},error:function(k){c.data("deleting",false);if(g){g(e.options.messages.serverCommunicationError,k)}}})}},_removeRowsFromTableWithAnimation:function(d,f){var c=this;if(typeof f==="undefined"){f=c.options.animationsEnabled}if(f){var e="jtable-row-deleting";if(this.options.jqueryuiTheme){e=e+" ui-state-disabled"}d.stop(true,true).addClass(e,"slow","").promise().done(function(){c._removeRowsFromTable(d,"deleted")})}else{c._removeRowsFromTable(d,"deleted")}}})})(jQuery);(function(b){var a={_create:b.hik.jtable.prototype._create,_addColumnsToHeaderRow:b.hik.jtable.prototype._addColumnsToHeaderRow,_addCellsToRowUsingRecord:b.hik.jtable.prototype._addCellsToRowUsingRecord,_onLoadingRecords:b.hik.jtable.prototype._onLoadingRecords,_onRecordsLoaded:b.hik.jtable.prototype._onRecordsLoaded,_onRowsRemoved:b.hik.jtable.prototype._onRowsRemoved};b.extend(true,b.hik.jtable.prototype,{options:{selecting:false,multiselect:false,selectingCheckboxes:false,selectOnRowClick:true,selectionChanged:function(c,d){}},_selectedRecordIdsBeforeLoad:null,_$selectAllCheckbox:null,_shiftKeyDown:false,_create:function(){if(this.options.selecting&&this.options.selectingCheckboxes){++this._firstDataColumnOffset;this._bindKeyboardEvents()}a._create.apply(this,arguments)},_bindKeyboardEvents:function(){var c=this;b(document).keydown(function(d){switch(d.which){case 16:c._shiftKeyDown=true;break}}).keyup(function(d){switch(d.which){case 16:c._shiftKeyDown=false;break}})},selectedRows:function(){return this._getSelectedRows()},selectRows:function(c){this._selectRows(c);this._onSelectionChanged()},_addColumnsToHeaderRow:function(c){if(this.options.selecting&&this.options.selectingCheckboxes){if(this.options.multiselect){c.append(this._createSelectAllHeader())}else{c.append(this._createEmptyCommandHeader())}}a._addColumnsToHeaderRow.apply(this,arguments)},_addCellsToRowUsingRecord:function(c){if(this.options.selecting){this._makeRowSelectable(c)}a._addCellsToRowUsingRecord.apply(this,arguments)},_onLoadingRecords:function(){if(this.options.selecting){this._storeSelectionList()}a._onLoadingRecords.apply(this,arguments)},_onRecordsLoaded:function(){if(this.options.selecting){this._restoreSelectionList()}a._onRecordsLoaded.apply(this,arguments)},_onRowsRemoved:function(c,d){if(this.options.selecting&&(d!=="reloading")&&(c.filter(".jtable-row-selected").length>0)){this._onSelectionChanged()}a._onRowsRemoved.apply(this,arguments)},_createSelectAllHeader:function(){var c=this;var d=b('<th class=""></th>').addClass("jtable-command-column-header jtable-column-header-selecting");this._jqueryuiThemeAddClass(d,"ui-state-default");var e=b("<div />").addClass("jtable-column-header-container").appendTo(d);c._$selectAllCheckbox=b('<input type="checkbox" />').appendTo(e).click(function(){if(c._$tableRows.length<=0){c._$selectAllCheckbox.attr("checked",false);return}var f=c._$tableBody.find(">tr.jtable-data-row");if(c._$selectAllCheckbox.is(":checked")){c._selectRows(f)}else{c._deselectRows(f)}c._onSelectionChanged()});return d},_storeSelectionList:function(){var c=this;if(!c.options.selecting){return}c._selectedRecordIdsBeforeLoad=[];c._getSelectedRows().each(function(){c._selectedRecordIdsBeforeLoad.push(c._getKeyValueOfRecord(b(this).data("record")))})},_restoreSelectionList:function(){var c=this;if(!c.options.selecting){return}var d=0;for(var f=0;f<c._$tableRows.length;++f){var e=c._getKeyValueOfRecord(c._$tableRows[f].data("record"));if(b.inArray(e,c._selectedRecordIdsBeforeLoad)>-1){c._selectRows(c._$tableRows[f]);++d}}if(c._selectedRecordIdsBeforeLoad.length>0&&c._selectedRecordIdsBeforeLoad.length!==d){c._onSelectionChanged()}c._selectedRecordIdsBeforeLoad=[];c._refreshSelectAllCheckboxState()},_getSelectedRows:function(){return this._$tableBody.find(">tr.jtable-row-selected")},_makeRowSelectable:function(d){var e=this;if(e.options.selectOnRowClick){d.click(function(){e._invertRowSelection(d)})}if(e.options.selectingCheckboxes){var f=b("<td></td>").addClass("jtable-selecting-column");var c=b('<input type="checkbox" />').appendTo(f);if(!e.options.selectOnRowClick){c.click(function(){e._invertRowSelection(d)})}d.append(f)}},_invertRowSelection:function(c){if(c.hasClass("jtable-row-selected")){this._deselectRows(c)}else{if(this._shiftKeyDown){var f=this._findRowIndex(c);var d=this._findFirstSelectedRowIndexBeforeIndex(f)+1;if(d>0&&d<f){this._selectRows(this._$tableBody.find("tr").slice(d,f+1))}else{var e=this._findFirstSelectedRowIndexAfterIndex(f)-1;if(e>f){this._selectRows(this._$tableBody.find("tr").slice(f,e+1))}else{this._selectRows(c)}}}else{this._selectRows(c)}}this._onSelectionChanged()},_findFirstSelectedRowIndexBeforeIndex:function(d){for(var c=d-1;c>=0;--c){if(this._$tableRows[c].hasClass("jtable-row-selected")){return c}}return -1},_findFirstSelectedRowIndexAfterIndex:function(d){for(var c=d+1;c<this._$tableRows.length;++c){if(this._$tableRows[c].hasClass("jtable-row-selected")){return c}}return -1},_selectRows:function(c){if(!this.options.multiselect){this._deselectRows(this._getSelectedRows())}c.addClass("jtable-row-selected");this._jqueryuiThemeAddClass(c,"ui-state-highlight");if(this.options.selectingCheckboxes){c.find(">td.jtable-selecting-column >input").prop("checked",true)}this._refreshSelectAllCheckboxState()},_deselectRows:function(c){c.removeClass("jtable-row-selected ui-state-highlight");if(this.options.selectingCheckboxes){c.find(">td.jtable-selecting-column >input").prop("checked",false)}this._refreshSelectAllCheckboxState()},_refreshSelectAllCheckboxState:function(){if(!this.options.selectingCheckboxes||!this.options.multiselect){return}var d=this._$tableRows.length;var c=this._getSelectedRows().length;if(c===0){this._$selectAllCheckbox.prop("indeterminate",false);this._$selectAllCheckbox.attr("checked",false)}else{if(c===d){this._$selectAllCheckbox.prop("indeterminate",false);this._$selectAllCheckbox.attr("checked",true)}else{this._$selectAllCheckbox.attr("checked",false);this._$selectAllCheckbox.prop("indeterminate",true)}}},_onSelectionChanged:function(){this._trigger("selectionChanged",null,{})}})})(jQuery);(function(b){var a={load:b.hik.jtable.prototype.load,_create:b.hik.jtable.prototype._create,_setOption:b.hik.jtable.prototype._setOption,_createRecordLoadUrl:b.hik.jtable.prototype._createRecordLoadUrl,_createJtParamsForLoading:b.hik.jtable.prototype._createJtParamsForLoading,_addRowToTable:b.hik.jtable.prototype._addRowToTable,_addRow:b.hik.jtable.prototype._addRow,_removeRowsFromTable:b.hik.jtable.prototype._removeRowsFromTable,_onRecordsLoaded:b.hik.jtable.prototype._onRecordsLoaded};b.extend(true,b.hik.jtable.prototype,{options:{paging:false,pageList:"normal",pageSize:10,pageSizes:[10,25,50,100,250,500],pageSizeChangeArea:true,gotoPageArea:"combobox",messages:{pagingInfo:"Showing {0}-{1} of {2}",pageSizeChangeLabel:"Row count",gotoPageLabel:"Go to page"}},_$bottomPanel:null,_$pagingListArea:null,_$pageSizeChangeArea:null,_$pageInfoSpan:null,_$gotoPageArea:null,_$gotoPageInput:null,_totalRecordCount:0,_currentPageNo:1,_create:function(){a._create.apply(this,arguments);if(this.options.paging){this._loadPagingSettings();this._createBottomPanel();this._createPageListArea();this._createGotoPageInput();this._createPageSizeSelection()}},_loadPagingSettings:function(){if(!this.options.saveUserPreferences){return}var c=this._getCookie("page-size");if(c){this.options.pageSize=this._normalizeNumber(c,1,1000000,this.options.pageSize)}},_createBottomPanel:function(){var d=this;d._$bottomPanel=b("<div />").addClass("jtable-bottom-panel").insertAfter(d._$table);var e=b("<div />").addClass("jtable-left-area").appendTo(d._$bottomPanel);var c=b("<div />").addClass("jtable-right-area").appendTo(d._$bottomPanel);if(d.options.bootstrap3){d._$bottomPanel.addClass("clearfix");e.addClass("pull-left");c.addClass("pull-right")}else{d._jqueryuiThemeAddClass(d._$bottomPanel,"ui-state-default")}},_createPageListArea:function(){var c=this;if(c.options.bootstrap3){c._$pagingListArea=b("<ul></ul>").addClass("jtable-page-list pagination").appendTo(c._$bottomPanel.find(".jtable-left-area"))}else{c._$pagingListArea=b("<span></span>").addClass("jtable-page-list").appendTo(c._$bottomPanel.find(".jtable-left-area"))}c._$pageInfoSpan=b("<span></span>").addClass("jtable-page-info").appendTo(c._$bottomPanel.find(".jtable-right-area"))},_createPageSizeSelection:function(){var c=this;if(!c.options.pageSizeChangeArea){return}if(c._findIndexInArray(c.options.pageSize,c.options.pageSizes)<0){c.options.pageSizes.push(parseInt(c.options.pageSize));c.options.pageSizes.sort(function(g,f){return g-f})}c._$pageSizeChangeArea=b("<span></span>").addClass("jtable-page-size-change").appendTo(c._$bottomPanel.find(".jtable-left-area"));c._$pageSizeChangeArea.append("<span>"+c.options.messages.pageSizeChangeLabel+": </span>");var e=b("<select></select>").appendTo(c._$pageSizeChangeArea);if(c.options.bootstrap3){e.addClass("form-control")}for(var d=0;d<c.options.pageSizes.length;d++){e.append('<option value="'+c.options.pageSizes[d]+'">'+c.options.pageSizes[d]+"</option>")}e.val(c.options.pageSize);e.change(function(){c._changePageSize(parseInt(b(this).val()))})},_createGotoPageInput:function(){var c=this;if(!c.options.gotoPageArea||c.options.gotoPageArea==="none"){return}this._$gotoPageArea=b("<span></span>").addClass("jtable-goto-page").appendTo(c._$bottomPanel.find(".jtable-left-area"));this._$gotoPageArea.append("<span>"+c.options.messages.gotoPageLabel+": </span>");if(c.options.gotoPageArea==="combobox"){c._$gotoPageInput=b("<select></select>").appendTo(this._$gotoPageArea).data("pageCount",1).change(function(){c._changePage(parseInt(b(this).val()))});if(c.options.bootstrap3){c._$gotoPageInput.addClass("form-control")}c._$gotoPageInput.append('<option value="1">1</option>')}else{c._$gotoPageInput=b('<input type="text" maxlength="10" value="'+c._currentPageNo+'" />').appendTo(this._$gotoPageArea).keypress(function(d){if(d.which===13){d.preventDefault();c._changePage(parseInt(c._$gotoPageInput.val()))}else{if(d.which===43){d.preventDefault();c._changePage(parseInt(c._$gotoPageInput.val())+1)}else{if(d.which===45){d.preventDefault();c._changePage(parseInt(c._$gotoPageInput.val())-1)}else{var e=((47<d.keyCode&&d.keyCode<58&&d.shiftKey===false&&d.altKey===false)||(d.keyCode===8)||(d.keyCode===9));if(!e){d.preventDefault()}}}}})}},_refreshGotoPageInput:function(){if(!this.options.gotoPageArea||this.options.gotoPageArea=="none"){return}if(this._totalRecordCount<=0){this._$gotoPageArea.hide()}else{this._$gotoPageArea.show()}if(this.options.gotoPageArea==="combobox"){var f=this._$gotoPageInput.data("pageCount");var c=this._calculatePageCount();if(f!==c){this._$gotoPageInput.empty();var d=1;if(c>10000){d=100}else{if(c>5000){d=10}else{if(c>2000){d=5}else{if(c>1000){d=2}}}}for(var e=d;e<=c;e+=d){this._$gotoPageInput.append('<option value="'+e+'">'+e+"</option>")}this._$gotoPageInput.data("pageCount",c)}}this._$gotoPageInput.val(this._currentPageNo)},load:function(){this._currentPageNo=1;a.load.apply(this,arguments)},_setOption:function(c,d){a._setOption.apply(this,arguments);if(c==="pageSize"){this._changePageSize(parseInt(d))}},_changePageSize:function(c){if(c===this.options.pageSize){return}this.options.pageSize=c;var d=this._calculatePageCount();if(this._currentPageNo>d){this._currentPageNo=d}if(this._currentPageNo<=0){this._currentPageNo=1}var f=this._$bottomPanel.find(".jtable-page-size-change select");if(f.length>0){if(parseInt(f.val())!==c){var e=f.find("option[value="+c+"]");if(e.length>0){f.val(c)}}}this._savePagingSettings();this._reloadTable()},_savePagingSettings:function(){if(!this.options.saveUserPreferences){return}this._setCookie("page-size",this.options.pageSize)},_createRecordLoadUrl:function(){var c=a._createRecordLoadUrl.apply(this,arguments);c=this._addPagingInfoToUrl(c,this._currentPageNo);return c},_createJtParamsForLoading:function(){var c=a._createJtParamsForLoading.apply(this,arguments);if(this.options.paging){c.jtStartIndex=(this._currentPageNo-1)*this.options.pageSize;c.jtPageSize=this.options.pageSize}return c},_addRowToTable:function(e,d,c){if(c&&this.options.paging){this._reloadTable();return}a._addRowToTable.apply(this,arguments)},_addRow:function(c,d){if(d&&d.isNewRow&&this.options.paging){this._reloadTable();return}a._addRow.apply(this,arguments)},_removeRowsFromTable:function(c,d){a._removeRowsFromTable.apply(this,arguments);if(this.options.paging){if(this._$tableRows.length<=0&&this._currentPageNo>1){--this._currentPageNo}this._reloadTable()}},_onRecordsLoaded:function(c){if(this.options.paging){this._totalRecordCount=c.TotalRecordCount;this._createPagingList();this._createPagingInfo();this._refreshGotoPageInput()}a._onRecordsLoaded.apply(this,arguments)},_addPagingInfoToUrl:function(e,c){if(!this.options.paging){return e}var d=(c-1)*this.options.pageSize;var f=this.options.pageSize;return(e+(e.indexOf("?")<0?"?":"&")+"jtStartIndex="+d+"&jtPageSize="+f)},_createPagingList:function(){if(this.options.pageSize<=0){return}this._$pagingListArea.empty();if(this._totalRecordCount<=0){return}var c=this._calculatePageCount();this._createFirstAndPreviousPageButtons();if(this.options.pageList==="normal"){this._createPageNumberButtons(this._calculatePageNumbers(c))}this._createLastAndNextPageButtons(c);this._bindClickEventsToPageNumberButtons()},_createFirstAndPreviousPageButtons:function(){var c=this;if(c.options.bootstrap3){var e=b("<li></li>").html('<a href="#">&laquo;</a>')}else{var e=b("<span></span>").html("&lt;&lt;")}e.addClass("jtable-page-number-first").data("pageNumber",1).appendTo(c._$pagingListArea);if(c.options.bootstrap3){var d=b("<li></li>").html('<a href="#">&lsaquo;</a>')}else{var d=b("<span></span>").html("&lt;")}d.addClass("jtable-page-number-previous").data("pageNumber",c._currentPageNo-1).appendTo(c._$pagingListArea);if(!c.options.bootstrap3){c._jqueryuiThemeAddClass(e,"ui-button ui-state-default","ui-state-hover");c._jqueryuiThemeAddClass(d,"ui-button ui-state-default","ui-state-hover")}if(c._currentPageNo<=1){e.addClass("jtable-page-number-disabled");d.addClass("jtable-page-number-disabled");if(!c.options.bootstrap3){c._jqueryuiThemeAddClass(e,"ui-state-disabled");c._jqueryuiThemeAddClass(d,"ui-state-disabled")}else{e.addClass("disabled");d.addClass("disabled")}}},_createLastAndNextPageButtons:function(f){var e=this;if(e.options.bootstrap3){var c=b("<li></li>").html('<a href="#">&rsaquo;</a>')}else{var c=b("<span></span>").html("&gt;")}c.addClass("jtable-page-number-next").data("pageNumber",this._currentPageNo+1).appendTo(e._$pagingListArea);if(e.options.bootstrap3){var d=b("<li></li>").html('<a href="#">&raquo;</a>')}else{var d=b("<span></span>").html("&gt;&gt;")}d.addClass("jtable-page-number-last").data("pageNumber",f).appendTo(e._$pagingListArea);if(!e.options.bootstrap3){e._jqueryuiThemeAddClass(c,"ui-button ui-state-default","ui-state-hover");e._jqueryuiThemeAddClass(d,"ui-button ui-state-default","ui-state-hover")}if(this._currentPageNo>=f){c.addClass("jtable-page-number-disabled");d.addClass("jtable-page-number-disabled");if(!e.options.bootstrap3){e._jqueryuiThemeAddClass(c,"ui-state-disabled");e._jqueryuiThemeAddClass(d,"ui-state-disabled")}else{c.addClass("disabled");d.addClass("disabled")}}},_createPageNumberButtons:function(c){var e=this;var d=0;for(var f=0;f<c.length;f++){if((c[f]-d)>1){if(e.options.bootstrap3){var g=b("<li></li>").html('<a href="#">&hellip;</a>')}else{var g=b("<span></span>").html("...")}g.addClass("jtable-page-number-space").appendTo(e._$pagingListArea)}e._createPageNumberButton(c[f]);d=c[f]}},_createPageNumberButton:function(d){var e=this;if(e.options.bootstrap3){var c=b("<li></li>").html('<a href="#">'+d+"</a>")}else{var c=b("<span></span>").html(d)}c.addClass("jtable-page-number").data("pageNumber",d).appendTo(e._$pagingListArea);if(!e.options.bootstrap3){e._jqueryuiThemeAddClass(c,"ui-button ui-state-default","ui-state-hover")}if(e._currentPageNo===d){c.addClass("jtable-page-number-active jtable-page-number-disabled");if(!e.options.bootstrap3){e._jqueryuiThemeAddClass(c,"ui-state-active")}else{c.addClass("active").html('<a href="#">'+d+' <span class="sr-only">(current)</span></a>')}}},_calculatePageCount:function(){var c=Math.floor(this._totalRecordCount/this.options.pageSize);if(this._totalRecordCount%this.options.pageSize!==0){++c}return c},_calculatePageNumbers:function(e){if(e<=4){var c=[];for(var f=1;f<=e;++f){c.push(f)}return c}else{var d=[1,2,e-1,e];var h=this._normalizeNumber(this._currentPageNo-1,1,e,1);var g=this._normalizeNumber(this._currentPageNo+1,1,e,1);this._insertToArrayIfDoesNotExists(d,h);this._insertToArrayIfDoesNotExists(d,this._currentPageNo);this._insertToArrayIfDoesNotExists(d,g);d.sort(function(j,i){return j-i});return d}},_createPagingInfo:function(){if(this._totalRecordCount<=0){this._$pageInfoSpan.empty();return}var e=(this._currentPageNo-1)*this.options.pageSize+1;var d=this._currentPageNo*this.options.pageSize;d=this._normalizeNumber(d,e,this._totalRecordCount,0);if(d>=e){var c=this._formatString(this.options.messages.pagingInfo,e,d,this._totalRecordCount);this._$pageInfoSpan.html(c)}},_bindClickEventsToPageNumberButtons:function(){var c=this;c._$pagingListArea.find(".jtable-page-number,.jtable-page-number-previous,.jtable-page-number-next,.jtable-page-number-first,.jtable-page-number-last").not(".jtable-page-number-disabled").click(function(d){d.preventDefault();c._changePage(b(this).data("pageNumber"))})},_changePage:function(c){c=this._normalizeNumber(c,1,this._calculatePageCount(),1);if(c===this._currentPageNo){this._refreshGotoPageInput();return}this._currentPageNo=c;this._reloadTable()}})})(jQuery);(function(b){var a={_initializeFields:b.hik.jtable.prototype._initializeFields,_normalizeFieldOptions:b.hik.jtable.prototype._normalizeFieldOptions,_createHeaderCellForField:b.hik.jtable.prototype._createHeaderCellForField,_createRecordLoadUrl:b.hik.jtable.prototype._createRecordLoadUrl,_createJtParamsForLoading:b.hik.jtable.prototype._createJtParamsForLoading};b.extend(true,b.hik.jtable.prototype,{options:{sorting:false,multiSorting:false,defaultSorting:""},_lastSorting:null,_initializeFields:function(){a._initializeFields.apply(this,arguments);this._lastSorting=[];if(this.options.sorting){this._buildDefaultSortingArray()}},_normalizeFieldOptions:function(d,c){a._normalizeFieldOptions.apply(this,arguments);c.sorting=(c.sorting!==false)},_createHeaderCellForField:function(e,d){var c=a._createHeaderCellForField.apply(this,arguments);if(this.options.sorting&&d.sorting){this._makeColumnSortable(c,e)}return c},_createRecordLoadUrl:function(){var c=a._createRecordLoadUrl.apply(this,arguments);c=this._addSortingInfoToUrl(c);return c},_buildDefaultSortingArray:function(){var c=this;b.each(c.options.defaultSorting.split(","),function(d,e){b.each(c.options.fields,function(h,g){if(g.sorting){var f=e.indexOf(h);if(f>-1){if(e.toUpperCase().indexOf(" DESC",f)>-1){c._lastSorting.push({fieldName:h,sortOrder:"DESC"})}else{c._lastSorting.push({fieldName:h,sortOrder:"ASC"})}}}})})},_makeColumnSortable:function(e,f){var d=this;e.addClass("jtable-column-header-sortable").click(function(g){g.preventDefault();if(!d.options.multiSorting||!g.ctrlKey){d._lastSorting=[]}d._sortTableByColumn(e)});var c=b("<span />").addClass("jtable-sortable-icon").appendTo(e.find(".jtable-column-header-container"));if(d.options.bootstrap3){c.addClass("glyphicon glyphicon-sort pull-right")}b.each(this._lastSorting,function(h,g){if(g.fieldName===f){if(g.sortOrder==="DESC"){e.addClass("jtable-column-header-sorted-desc")}else{e.addClass("jtable-column-header-sorted-asc")}if(d.options.bootstrap3){e.find(".jtable-sortable-icon").removeClass("glyphicon-sort").addClass(g.sortOrder==="DESC"?"glyphicon-sort-by-alphabet":"glyphicon-sort-by-alphabet-alt")}}})},_sortTableByColumn:function(d){if(this._lastSorting.length===0){d.siblings().removeClass("jtable-column-header-sorted-asc jtable-column-header-sorted-desc").find(".jtable-sortable-icon").removeClass("glyphicon-sort-by-alphabet glyphicon-sort-by-alphabet-alt").addClass("glyphicon-sort")}for(var c=0;c<this._lastSorting.length;c++){if(this._lastSorting[c].fieldName===d.data("fieldName")){this._lastSorting.splice(c--,1)}}if(d.hasClass("jtable-column-header-sorted-asc")){d.removeClass("jtable-column-header-sorted-asc").addClass("jtable-column-header-sorted-desc");d.find(".jtable-sortable-icon").removeClass("glyphicon-sort glyphicon-sort-by-alphabet").addClass("glyphicon-sort-by-alphabet-alt");this._lastSorting.push({fieldName:d.data("fieldName"),sortOrder:"DESC"})}else{d.removeClass("jtable-column-header-sorted-desc").addClass("jtable-column-header-sorted-asc");d.find(".jtable-sortable-icon").removeClass("glyphicon-sort glyphicon-sort-by-alphabet-alt").addClass("glyphicon-sort-by-alphabet");this._lastSorting.push({fieldName:d.data("fieldName"),sortOrder:"ASC"})}this._reloadTable()},_addSortingInfoToUrl:function(c){if(!this.options.sorting||this._lastSorting.length===0){return c}var d=[];b.each(this._lastSorting,function(e,f){d.push(f.fieldName+" "+f.sortOrder)});return(c+(c.indexOf("?")<0?"?":"&")+"jtSorting="+d.join(","))},_createJtParamsForLoading:function(){var d=a._createJtParamsForLoading.apply(this,arguments);if(this.options.sorting&&this._lastSorting.length){var c=[];b.each(this._lastSorting,function(e,f){c.push(f.fieldName+" "+f.sortOrder)});d.jtSorting=c.join(",")}return d}})})(jQuery);(function(b){var a={_create:b.hik.jtable.prototype._create,_normalizeFieldOptions:b.hik.jtable.prototype._normalizeFieldOptions,_createHeaderCellForField:b.hik.jtable.prototype._createHeaderCellForField,_createCellForRecordField:b.hik.jtable.prototype._createCellForRecordField};b.extend(true,b.hik.jtable.prototype,{options:{tableId:undefined,columnResizable:true,columnSelectable:true},_$columnSelectionDiv:null,_$columnResizeBar:null,_cookieKeyPrefix:null,_currentResizeArgs:null,_create:function(){a._create.apply(this,arguments);this._createColumnResizeBar();this._createColumnSelection();if(this.options.saveUserPreferences){this._loadColumnSettings()}this._normalizeColumnWidths()},_normalizeFieldOptions:function(d,c){a._normalizeFieldOptions.apply(this,arguments);if(this.options.columnResizable){c.columnResizable=(c.columnResizable!=false)}if(!c.visibility){c.visibility="visible"}},_createHeaderCellForField:function(e,d){var c=a._createHeaderCellForField.apply(this,arguments);if(this.options.columnResizable&&d.columnResizable&&(e!==this._columnList[this._columnList.length-1])){this._makeColumnResizable(c)}if(d.visibility==="hidden"){c.hide()}return c},_createCellForRecordField:function(c,f){var e=a._createCellForRecordField.apply(this,arguments);var d=this.options.fields[f];if(d.visibility==="hidden"){e.hide()}return e},changeColumnVisibility:function(d,c){this._changeColumnVisibilityInternal(d,c);this._normalizeColumnWidths();if(this.options.saveUserPreferences){this._saveColumnSettings()}},_changeColumnVisibilityInternal:function(d,c){var e=this._columnList.indexOf(d);if(e<0){this._logWarn('Column "'+d+'" does not exist in fields!');return}if(["visible","hidden","fixed"].indexOf(c)<0){this._logWarn('Visibility value is not valid: "'+c+'"! Options are: visible, hidden, fixed.');return}var g=this.options.fields[d];if(g.visibility===c){return}var f=this._firstDataColumnOffset+e+1;if(g.visibility!=="hidden"&&c==="hidden"){this._$table.find(">thead >tr >th:nth-child("+f+"),>tbody >tr >td:nth-child("+f+")").hide()}else{if(g.visibility==="hidden"&&c!=="hidden"){this._$table.find(">thead >tr >th:nth-child("+f+"),>tbody >tr >td:nth-child("+f+")").show().css("display","table-cell")}}g.visibility=c},_createColumnSelection:function(){var c=this;this._$columnSelectionDiv=b("<div />").addClass("jtable-column-selection-container").appendTo(c._$mainContainer);this._$table.children("thead").bind("contextmenu",function(j){if(!c.options.columnSelectable){return}j.preventDefault();b("<div />").addClass("jtable-contextmenu-overlay").click(function(){b(this).remove();c._$columnSelectionDiv.hide()}).bind("contextmenu",function(){return false}).appendTo(document.body);c._fillColumnSelection();var f=c._$mainContainer.offset();var i=j.pageY-f.top;var d=j.pageX-f.left;var h=100;var g=c._$mainContainer.width();if((g>h)&&(d>(g-h))){d=g-h}c._$columnSelectionDiv.css({left:d,top:i,"min-width":h+"px"}).show()})},_fillColumnSelection:function(){var f=this;var e=b("<ul></ul>").addClass("jtable-column-select-list");for(var g=0;g<this._columnList.length;g++){var d=this._columnList[g];var k=this.options.fields[d];var j=b("<li></li>").appendTo(e);var c=b('<label for="'+d+'"></label>').append(b("<span>"+(k.title||d)+"</span>")).appendTo(j);var h=b('<input type="checkbox" name="'+d+'">').prependTo(c).click(function(){var m=b(this);var l=m.attr("name");var i=f.options.fields[l];if(i.visibility==="fixed"){return}f.changeColumnVisibility(l,m.is(":checked")?"visible":"hidden")});if(k.visibility!=="hidden"){h.attr("checked","checked")}if(k.visibility==="fixed"){h.attr("disabled","disabled")}}this._$columnSelectionDiv.html(e)},_createColumnResizeBar:function(){this._$columnResizeBar=b("<div />").addClass("jtable-column-resize-bar").appendTo(this._$mainContainer).hide()},_makeColumnResizable:function(d){var c=this;b("<div />").addClass("jtable-column-resize-handler").appendTo(d.find(".jtable-column-header-container")).mousedown(function(g){g.preventDefault();g.stopPropagation();var e=c._$mainContainer.offset();var f=d.nextAll("th.jtable-column-header:visible:first");if(!f.length){return}var i=10;c._currentResizeArgs={currentColumnStartWidth:d.outerWidth(),minWidth:i,maxWidth:d.outerWidth()+f.outerWidth()-i,mouseStartX:g.pageX,minResizeX:function(){return this.mouseStartX-(this.currentColumnStartWidth-this.minWidth)},maxResizeX:function(){return this.mouseStartX+(this.maxWidth-this.currentColumnStartWidth)}};var j=function(k){if(!c._currentResizeArgs){return}var l=c._normalizeNumber(k.pageX,c._currentResizeArgs.minResizeX(),c._currentResizeArgs.maxResizeX());c._$columnResizeBar.css("left",(l-e.left)+"px")};var h=function(n){if(!c._currentResizeArgs){return}b(document).unbind("mousemove",j);b(document).unbind("mouseup",h);c._$columnResizeBar.hide();var l=n.pageX-c._currentResizeArgs.mouseStartX;var o=c._normalizeNumber(c._currentResizeArgs.currentColumnStartWidth+l,c._currentResizeArgs.minWidth,c._currentResizeArgs.maxWidth);var m=f.outerWidth()+(c._currentResizeArgs.currentColumnStartWidth-o);var k=d.data("width-in-percent")/c._currentResizeArgs.currentColumnStartWidth;d.data("width-in-percent",o*k);f.data("width-in-percent",m*k);d.css("width",d.data("width-in-percent")+"%");f.css("width",f.data("width-in-percent")+"%");c._normalizeColumnWidths();c._currentResizeArgs=null;if(c.options.saveUserPreferences){c._saveColumnSettings()}};c._$columnResizeBar.show().css({top:(d.offset().top-e.top)+"px",left:(g.pageX-e.left)+"px",height:(c._$table.outerHeight())+"px"});b(document).bind("mousemove",j);b(document).bind("mouseup",h)})},_normalizeColumnWidths:function(){var g=this._$table.find(">thead th.jtable-command-column-header").data("width-in-percent",1).css("width","1%");var c=this._$table.find(">thead th.jtable-column-header");var e=0;c.each(function(){var h=b(this);if(h.is(":visible")){e+=h.outerWidth()}});var f={};var d=100-g.length;c.each(function(){var i=b(this);if(i.is(":visible")){var j=i.data("fieldName");var h=i.outerWidth()*d/e;f[j]=h}});c.each(function(){var h=b(this);if(h.is(":visible")){var i=h.data("fieldName");h.data("width-in-percent",f[i]).css("width",f[i]+"%")}})},_saveColumnSettings:function(){var c=this;var d="";this._$table.find(">thead >tr >th.jtable-column-header").each(function(){var h=b(this);var i=h.data("fieldName");var g=h.data("width-in-percent");var e=c.options.fields[i].visibility;var f=i+"="+e+";"+g;d=d+f+"|"});this._setCookie("column-settings",d.substr(0,d.length-1))},_loadColumnSettings:function(){var e=this;var c=this._getCookie("column-settings");if(!c){return}var f={};b.each(c.split("|"),function(i,h){var k=h.split("=");var j=k[0];var g=k[1].split(";");f[j]={columnVisibility:g[0],columnWidth:g[1]}});var d=this._$table.find(">thead >tr >th.jtable-column-header");d.each(function(){var g=b(this);var i=g.data("fieldName");var h=e.options.fields[i];if(f[i]){if(h.visibility!="fixed"){e._changeColumnVisibilityInternal(i,f[i].columnVisibility)}g.data("width-in-percent",f[i].columnWidth).css("width",f[i].columnWidth+"%")}})}})})(jQuery);(function(b){var a={_removeRowsFromTable:b.hik.jtable.prototype._removeRowsFromTable};b.extend(true,b.hik.jtable.prototype,{options:{openChildAsAccordion:false},openChildTable:function(d,c,f){var e=this;if(c.jqueryuiTheme===undefined){c.jqueryuiTheme=e.options.jqueryuiTheme}c.showCloseButton=(c.showCloseButton!==false);if(c.showCloseButton&&!c.closeRequested){c.closeRequested=function(){e.closeChildTable(d)}}if(e.options.openChildAsAccordion){d.siblings(".jtable-data-row").each(function(){e.closeChildTable(b(this))})}e.closeChildTable(d,function(){var h=e.getChildRow(d).children("td").empty();var g=b("<div />").addClass("jtable-child-table-container").appendTo(h);h.data("childTable",g);g.jtable(c);e.openChildRow(d);g.hide().slideDown("fast",function(){if(f){f({childTable:g})}})})},closeChildTable:function(c,f){var e=this;var g=this.getChildRow(c).children("td");var d=g.data("childTable");if(!d){if(f){f()}return}g.data("childTable",null);d.slideUp("fast",function(){d.jtable("destroy");d.remove();e.closeChildRow(c);if(f){f()}})},isChildRowOpen:function(c){return(this.getChildRow(c).is(":visible"))},getChildRow:function(c){return c.data("childRow")||this._createChildRow(c)},openChildRow:function(c){var d=this.getChildRow(c);if(!d.is(":visible")){d.show()}return d},closeChildRow:function(c){var d=this.getChildRow(c);if(d.is(":visible")){d.hide()}},_removeRowsFromTable:function(c,d){if(d==="deleted"){c.each(function(){var e=b(this);var f=e.data("childRow");if(f){f.remove()}})}a._removeRowsFromTable.apply(this,arguments)},_createChildRow:function(d){var c=this._$table.find("thead th").length;var e=b("<tr></tr>").addClass("jtable-child-row").append('<td colspan="'+c+'"></td>');d.after(e);d.data("childRow",e);e.hide();return e}})})(jQuery);